<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="clr-namespace:Jvedio"
    xmlns:p="clr-namespace:Jvedio.Properties"
    xmlns:trace="clr-namespace:System.Diagnostics;assembly=WindowsBase"
    x:Class="Jvedio.Main"
    mc:Ignorable="d"
    Title="Jvedio" Height="600" Width="1100"
    WindowStyle="None"
    ResizeMode="CanResizeWithGrip"
    AllowsTransparency="True"
    Background="#00000000"
    WindowStartupLocation="CenterScreen"
    MinHeight="500"
    MinWidth="500" 
    Icon="pack://application:,,,/Resources/Jvedio.ico"
    Closed="Window_Closed"
    Closing="Window_Closing"
    AllowDrop="True"  
    Drop="Grid_Drop" 
    DragOver="Grid_DragOver"
    ContentRendered="Window_ContentRendered"
    
    PreviewKeyUp="Window_PreviewKeyUp"
    
    Activated="Window_Activated"
    
    
        >




    <Window.Resources>


        <!--Converter-->
        <BooleanToVisibilityConverter x:Key="BoolToVis" />
        <local:MovieStampTypeToStringConverter x:Key="MovieStampTypeToStringConverter" />
        <local:StringToUriStringConverterMain x:Key="StringToUriStringConverterMain" />
        <local:MovieStampTypeToVisibilityConverter x:Key="MovieStampTypeToVisibilityConverter" />
        <local:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
        <local:StringToVisibilityConverter x:Key="StringToVisibilityConverter" />
        <local:ImageTypeEnumConverter x:Key="ImageTypeEnumConverter" />
        <local:ViewTypeEnumConverter x:Key="ViewTypeEnumConverter" />
        <local:SearchTypeEnumConverter x:Key="SearchTypeEnumConverter" />
        <local:IntToCheckedConverter x:Key="IntToCheckedConverter"/>

        <!--高清、中字、流出-->
        <local:HDVConverter x:Key="HDVConverter"/>
        <local:CHSConverter x:Key="CHSConverter"/>
        <local:OutFlowConverter x:Key="OutFlowConverter"/>
        <local:MultiIntToMarginConverter x:Key="MultiIntToMarginConverter" />


        <!--字体-->
        <local:BoolToFontBoldConverter x:Key="BoolToFontBoldConverter" />
        <local:BoolToFontItalicConverter x:Key="BoolToFontItalicConverter" />
        <local:BoolToUnderLineConverter x:Key="BoolToUnderLineConverter" />
        <local:FontFamilyConverter x:Key="FontFamilyConverter" />

        <local:LabelToListConverter x:Key="LabelToListConverter" />

        <local:PlusToVisibilityConverter x:Key="PlusToVisibilityConverter" />

        <Style x:Key="ActorInfoTextBlock" TargetType="{x:Type TextBlock}">
            <Setter Property="Margin" Value="10 10"/>
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="Foreground" Value="{DynamicResource ForegroundGlobal}"/>
        </Style>

        <Style x:Key="ActorImage" TargetType="{x:Type Image}">
            <Setter Property="Width" Value="200"/>
            <Setter Property="VerticalAlignment" Value="Top"/>
            <Setter Property="Margin" Value="10 20"/>
            <Setter Property="Source" Value="{Binding smallimage}" />
            <Style.Triggers>
                <DataTrigger  Binding="{Binding smallimage}"  Value="{x:Null}">
                    <Setter Property="Source" Value="Resources/Picture/NoPrinting_A.jpg" />
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="ActorInfoTextBox" TargetType="{x:Type TextBox}">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="IsReadOnly" Value="True"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="TextAlignment" Value="Center"/>
            <Setter Property="Width" Value="{Binding ElementName=ActorImage,Path=Width,TargetNullValue=100}" />
        </Style>


        <Style x:Key="ActorInfoImage" TargetType="{x:Type Image}">
            <Setter Property="Width" Value="120"/>
            <Setter Property="VerticalAlignment" Value="Top"/>
            <Setter Property="Margin" Value="0 20"/>
            <Setter Property="Source" Value="{Binding Actress.smallimage}" />
            <Style.Triggers>
                <DataTrigger  Binding="{Binding Actress.smallimage}"  Value="{x:Null}">
                    <Setter Property="Source" Value="Resources/Picture/NoPrinting_A.jpg" />
                </DataTrigger>
            </Style.Triggers>
        </Style>




        <Style x:Key="BaseTextBox" TargetType="{x:Type TextBox}">
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="FontFamily" Value="Times New Romans"/>
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="Margin" Value="10 5 100 5"/>
            <Setter Property="Foreground" Value="{DynamicResource ForegroundSearch}"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="CaretBrush" Value="{DynamicResource ForegroundSearch}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{DynamicResource BackgroundMain}"/>
                </Trigger>
            </Style.Triggers>
        </Style>







        <Style x:Key="BaseTextBlock" TargetType="{x:Type TextBlock}">
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="TextAlignment" Value="Center"/>
            <Setter Property="FontFamily" Value="微软雅黑"/>
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="Margin" Value="0,5,0,5"/>
            <Setter Property="Foreground" Value="{DynamicResource ForegroundSearch}"/>
        </Style>

        <Style x:Key="SearchCandidateTextBlock" TargetType="{x:Type TextBlock}">
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="TextAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,5,0,5"/>
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Margin" Value="10 0"/>
            <Setter Property="Foreground" Value="{DynamicResource ForegroundSearch}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{DynamicResource BackgroundMain}" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="InfoTextBox" TargetType="{x:Type TextBox}">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="IsReadOnly" Value="True"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="TextAlignment" Value="Center"/>

            <Setter Property="Margin">
                <Setter.Value>
                    <MultiBinding Converter="{StaticResource MultiIntToMarginConverter}">
                        <Binding Path="MovieStyle_WordMargin_UD" Mode="OneWay" Source="{x:Static p:Settings.Default}"/>
                        <Binding Path="MovieStyle_WordMargin_LR" Mode="OneWay" Source="{x:Static p:Settings.Default}"/>
                    </MultiBinding>
                </Setter.Value>
            </Setter>

            <Style.Triggers>
                <DataTrigger  Binding="{Binding ShowImageMode, Mode=OneWay, Source={x:Static p:Settings.Default}}"  Value="海报图">
                    <Setter Property="Width" Value="{Binding ElementName=ViewImage,Path=Width,TargetNullValue=100}" />
                </DataTrigger>

                <DataTrigger  Binding="{Binding ShowImageMode, Mode=OneWay, Source={x:Static p:Settings.Default}}"  Value="缩略图">
                    <Setter Property="Width" Value="{Binding ElementName=ViewImage,Path=Width,TargetNullValue=100}" />
                </DataTrigger>

                <DataTrigger  Binding="{Binding ShowImageMode, Mode=OneWay, Source={x:Static p:Settings.Default}}"  Value="预览图">
                    <Setter Property="Width" Value="{Binding ElementName=ExtraImageCanvas,Path=Width}" />
                </DataTrigger>
            </Style.Triggers>



        </Style>

        <Style x:Key="ActorTextBlock" TargetType="{x:Type TextBox}">
            <Setter Property="Width" Value="100"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="IsReadOnly" Value="True"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="TextAlignment" Value="Left"/>
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Foreground" Value="{DynamicResource ForegroundSearch}"/>

            <Style.Triggers>
                <DataTrigger Binding="{Binding EnableEditActress}" Value="True">
                    <Setter Property="Background" Value="{DynamicResource BackgroundSide}"/>
                    <Setter Property="IsReadOnly" Value="False"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>



        <Style x:Key="SetButton" TargetType="{x:Type Button}">

            <Setter Property="FontFamily" Value="微软雅黑"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Width" Value="auto"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource ForegroundSearch}"/>

            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border Background="{TemplateBinding Background}" BorderBrush="Transparent" BorderThickness="0">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>


            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{DynamicResource BackgroundSearch}"/>
                </Trigger>
            </Style.Triggers>

        </Style>


        <Style x:Key="ViewBorder" TargetType="{x:Type Border}">
            <Setter Property="Width" Value="auto"/>
            <Setter Property="Height" Value="auto"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
        </Style>


        <Style x:Key="ViewStackPanel" TargetType="{x:Type StackPanel}">
            <Setter Property="VerticalAlignment" Value="Top"/>
            <Setter Property="Background" Value="{DynamicResource BackgroundMain}"/>

        </Style>
        <Style x:Key="ViewImage" TargetType="{x:Type Image}">
            <Setter Property="Margin" Value="0 5"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Style.Triggers>


                <!--有图-->
                <MultiDataTrigger>
                    <MultiDataTrigger.Conditions>
                        <Condition Binding="{Binding ShowImageMode, Mode=OneWay, Source={x:Static p:Settings.Default}}"  Value="缩略图"/>
                    </MultiDataTrigger.Conditions>
                    <Setter Property="Source" Value="{Binding smallimage}" />
                    <Setter Property="Width" Value="{Binding SmallImage_Width,Source={x:Static p:Settings.Default}}"/>
                    <Setter Property="Height" Value="{Binding SmallImage_Height,Source={x:Static p:Settings.Default}}"/>

                </MultiDataTrigger>


                <MultiDataTrigger>
                    <MultiDataTrigger.Conditions>
                        <Condition Binding="{Binding ShowImageMode, Mode=OneWay, Source={x:Static p:Settings.Default}}"  Value="海报图"/>
                    </MultiDataTrigger.Conditions>
                    <Setter Property="Source" Value="{Binding bigimage}" />
                    <Setter Property="Width" Value="{Binding BigImage_Width,Source={x:Static p:Settings.Default}}"/>
                    <Setter Property="Height" Value="{Binding BigImage_Height,Source={x:Static p:Settings.Default}}"/>
                </MultiDataTrigger>

                <MultiDataTrigger>
                    <MultiDataTrigger.Conditions>
                        <Condition Binding="{Binding ShowImageMode, Mode=OneWay, Source={x:Static p:Settings.Default}}"  Value="缩略图"/>
                    </MultiDataTrigger.Conditions>
                    <Setter Property="Source" Value="{Binding smallimage}" />
                    <Setter Property="Width" Value="{Binding SmallImage_Width,Source={x:Static p:Settings.Default}}"/>
                    <Setter Property="Height" Value="{Binding SmallImage_Height,Source={x:Static p:Settings.Default}}"/>
                </MultiDataTrigger>


                <MultiDataTrigger>
                    <MultiDataTrigger.Conditions>
                        <Condition Binding="{Binding ShowImageMode, Mode=OneWay, Source={x:Static p:Settings.Default}}"  Value="海报图"/>
                    </MultiDataTrigger.Conditions>
                    <Setter Property="Source" Value="{Binding bigimage}" />
                    <Setter Property="Width" Value="{Binding BigImage_Width,Source={x:Static p:Settings.Default}}"/>
                    <Setter Property="Height" Value="{Binding BigImage_Height,Source={x:Static p:Settings.Default}}"/>
                </MultiDataTrigger>


                <!--无图-->

                <MultiDataTrigger>
                    <MultiDataTrigger.Conditions>
                        <Condition Binding="{Binding ShowImageMode, Mode=OneWay, Source={x:Static p:Settings.Default}}"  Value="海报图"/>
                        <Condition Binding="{Binding bigimage}" Value="{x:Null}"/>
                    </MultiDataTrigger.Conditions>
                    <Setter Property="Source" Value="Resources/Picture/NoPrinting_B.jpg" />
                    <Setter Property="Width" Value="{Binding BigImage_Width,Source={x:Static p:Settings.Default}}"/>
                    <Setter Property="Height" Value="{Binding BigImage_Height,Source={x:Static p:Settings.Default}}"/>
                </MultiDataTrigger>


                <MultiDataTrigger>
                    <MultiDataTrigger.Conditions>
                        <Condition Binding="{Binding ShowImageMode, Mode=OneWay, Source={x:Static p:Settings.Default}}"  Value="缩略图"/>
                        <Condition Binding="{Binding smallimage}" Value="{x:Null}"/>
                    </MultiDataTrigger.Conditions>
                    <Setter Property="Source" Value="Resources/Picture/NoPrinting_S.jpg" />
                    <Setter Property="Width" Value="{Binding SmallImage_Width,Source={x:Static p:Settings.Default}}"/>
                    <Setter Property="Height" Value="{Binding SmallImage_Height,Source={x:Static p:Settings.Default}}"/>
                </MultiDataTrigger>

            </Style.Triggers>
        </Style>

        <Style x:Key="SearchTextGrid" TargetType="{x:Type Border}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsMouseOver, RelativeSource={RelativeSource AncestorType={x:Type Grid}, Mode=FindAncestor}}" Value="True">
                    <Setter Property="BorderBrush" Value="{DynamicResource ForegroundSearch}"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding IsMouseOver, RelativeSource={RelativeSource AncestorType={x:Type Grid}, Mode=FindAncestor}}" Value="False">
                    <Setter Property="Background" Value="Transparent"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="Ellipse" TargetType="{x:Type Ellipse}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsMouseOver, RelativeSource={RelativeSource AncestorType={x:Type Canvas}, Mode=FindAncestor}}" Value="True">
                    <Setter Property="Fill" Value="{DynamicResource ForegroundSearch}"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding IsMouseOver, RelativeSource={RelativeSource AncestorType={x:Type Canvas}, Mode=FindAncestor}}" Value="False">
                    <Setter Property="Fill" Value="{DynamicResource ForegroundSearch}"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>


        <Style x:Key="Ellipse2" TargetType="{x:Type Ellipse}">
            <Setter Property="Cursor" Value="Hand"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsMouseOver, RelativeSource={RelativeSource AncestorType={x:Type Canvas}, Mode=FindAncestor}}" Value="True">
                    <Setter Property="Fill" Value="#AD744C"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding IsMouseOver, RelativeSource={RelativeSource AncestorType={x:Type Canvas}, Mode=FindAncestor}}" Value="False">
                    <Setter Property="Fill" Value="#DD744C"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="Line" TargetType="{x:Type Line}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsMouseOver, RelativeSource={RelativeSource AncestorType={x:Type Canvas}, Mode=FindAncestor}}" Value="True">
                    <Setter Property="Stroke" Value="{DynamicResource ForegroundSearch}"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding IsMouseOver, RelativeSource={RelativeSource AncestorType={x:Type Canvas}, Mode=FindAncestor}}" Value="False">
                    <Setter Property="Stroke" Value="{DynamicResource ForegroundSearch}"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="SearchTextBox" TargetType="{x:Type TextBox}">

            <Style.Triggers>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="Foreground" Value="{DynamicResource ForegroundSearch}"/>
                    <Setter Property="FontStyle" Value="Normal"/>
                </Trigger>
                <Trigger Property="IsFocused" Value="False">
                    <Setter Property="Foreground" Value="{DynamicResource ForegroundGlobal}"/>
                    <Setter Property="FontStyle" Value="Italic"/>
                </Trigger>
            </Style.Triggers>

        </Style>


        <Style x:Key="GenTitle" TargetType="{x:Type TextBlock}">
            <Setter Property="HorizontalAlignment" Value="Stretch" />
            <Setter Property="Width" Value="auto" />
            <Setter Property="Height" Value="30" />
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Padding" Value="5 0 0 0"/>
            <Setter Property="TextAlignment" Value="Left" />
            <Setter Property="Foreground" Value="{DynamicResource ForegroundSearch}"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontFamily" Value="微软雅黑"/>
        </Style>


        <Style x:Key="GenLabel" TargetType="{x:Type Label}">
            <Setter Property="HorizontalAlignment" Value="Stretch" />
            <Setter Property="Width" Value="auto" />
            <Setter Property="Height" Value="50" />
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="HorizontalContentAlignment" Value="Center" />
            <Setter Property="Foreground" Value="{DynamicResource ForegroundGlobal}"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontFamily" Value="微软雅黑"/>
            <Setter Property="Margin" Value="5 2 5 2"/>
        </Style>

        <Style x:Key="ActorBorder" TargetType="{x:Type Border}">
            <Setter Property="Width" Value="auto" />
            <Setter Property="Height" Value="auto" />
            <Setter Property="Background" Value="{DynamicResource BackgroundSide}" />
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Margin" Value="10"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="BorderBrush" Value="Transparent"/>

            <!--编辑模式-->
            <Style.Triggers>
                <MultiDataTrigger>
                    <MultiDataTrigger.Conditions>
                        <Condition Binding="{Binding ActorEditMode, Mode=OneWay, Source={x:Static p:Settings.Default}}"  Value="True"/>
                        <Condition Binding="{Binding IsMouseOver, RelativeSource={RelativeSource Mode=Self}}" Value="True"/>
                    </MultiDataTrigger.Conditions>
                    <Setter Property="BorderBrush" Value="{DynamicResource Selected_BorderBrush}"/>
                </MultiDataTrigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="GenBorder" TargetType="{x:Type Border}">
            <Setter Property="Width" Value="auto" />
            <Setter Property="Height" Value="auto" />
            <Setter Property="Background" Value="{DynamicResource BackgroundSide}" />
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Margin" Value="10"/>
            <Setter Property="CornerRadius" Value="5"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{DynamicResource BackgroundTitle}" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="BaseLabel" TargetType="{x:Type Label}">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="Foreground" Value="{DynamicResource ForegroundSearch}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{DynamicResource BackgroundSearch}" />
                </Trigger>
            </Style.Triggers>


        </Style>


        <Style x:Key="PlayButton" TargetType="{x:Type Canvas}">

            <Setter Property="Visibility" Value="Hidden"/>


            <Style.Triggers>

                <MultiDataTrigger>
                    <MultiDataTrigger.Conditions>
                        <Condition Binding="{Binding EditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}}"  Value="False"/>
                        <Condition Binding="{Binding IsMouseOver, RelativeSource={RelativeSource AncestorType={x:Type Grid}, Mode=FindAncestor}}" Value="True"/>
                    </MultiDataTrigger.Conditions>
                    <Setter Property="Visibility" Value="Visible"/>
                </MultiDataTrigger>

                <DataTrigger Binding="{Binding EditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}}" Value="True">
                    <Setter Property="Visibility" Value="Hidden"/>
                </DataTrigger>
                <!--<DataTrigger Binding="{Binding IsMouseOver, RelativeSource={RelativeSource AncestorType={x:Type Grid}, Mode=FindAncestor}}" Value="False">
                    <Setter Property="Visibility" Value="Hidden"/>
                </DataTrigger>-->
            </Style.Triggers>
        </Style>









    </Window.Resources>


    <Grid x:Name="MainGrid"  AllowDrop="True" Margin="2"  >






        <Grid.Effect>
            <DropShadowEffect BlurRadius="15" Direction="-90" RenderingBias="Quality" ShadowDepth="2"/>
        </Grid.Effect>

        <Border CornerRadius="0" Background="{DynamicResource  BackgroundMain}" BorderBrush="Gray" BorderThickness="0" />
        <Grid    Background="Transparent"  Margin="0">
            <Grid  x:Name="Side_Grid"   HorizontalAlignment="Left" Height="auto" VerticalAlignment="Stretch" Width="180">
                <Grid.RenderTransform>
                    <TranslateTransform  />
                </Grid.RenderTransform>

                <Grid.Style>
                    <Style TargetType="{x:Type Grid}">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding ShowSideBar}" Value="True">
                                <DataTrigger.EnterActions>
                                    <BeginStoryboard  >
                                        <Storyboard>
                                            <DoubleAnimation   From="1" To="0" Duration="0:0:0.2" Storyboard.TargetProperty="Opacity"/>
                                            <DoubleAnimation  From="0" To="-180" Duration="0:0:0.2" Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </DataTrigger.EnterActions>
                                <DataTrigger.ExitActions>
                                    <BeginStoryboard  >
                                        <Storyboard>
                                            <DoubleAnimation   From="0" To="1" Duration="0:0:0.2" Storyboard.TargetProperty="Opacity"/>
                                            <DoubleAnimation  From="-180" To="0" Duration="0:0:0.2" Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </DataTrigger.ExitActions>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Grid.Style>






                <Border Background="{DynamicResource BackgroundSide}" x:Name="SideBorder" CornerRadius="0" BorderBrush="{DynamicResource BorderBursh}" BorderThickness="0" >
                </Border>

                <StackPanel Panel.ZIndex="3" Height="auto" VerticalAlignment="Top" Margin="0,10,0,0">
                    <Image HorizontalAlignment="Center" Height="40" VerticalAlignment="Center" Width="40" Source="/Resources/Picture/Jvedio.png"/>
                    <Image  ToolTip="Jvedio" Margin="0 10 0 10" HorizontalAlignment="Center" Height="20"  VerticalAlignment="Center"  Source="Resources/Picture/Title.png"/>

                    <Grid x:Name="AllSearchGrid"   Height="40" Width="auto"  Margin="10 10 10 0" >

                        <Border Style="{StaticResource SearchTextGrid}"   CornerRadius="20"  Background="{DynamicResource BackgroundSearch}" BorderThickness="2" />


                        <Grid x:Name="SearchOptionGrid"  Width="25" Panel.ZIndex="3" HorizontalAlignment="Left" Margin="10 0 0 0" MouseUp="ShowSearchMenu" Cursor="Hand">
                            <Image Source="{Binding Themes, Mode=OneWay, ConverterParameter=search,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="25" Width="25"/>
                            <Popup VerticalOffset="5" HorizontalOffset="-15" x:Name="SearchOptionPopup" Placement="Bottom" PopupAnimation="Fade"  PlacementTarget="{Binding ElementName=SearchOptionGrid}" AllowsTransparency="True" StaysOpen="False" IsOpen="False">
                                <Border Background="{DynamicResource BackgroundMenu}" CornerRadius="5">
                                    <StackPanel Margin="5">
                                        <RadioButton Click="SaveAllSearchType" IsChecked="{Binding AllSearchType, ConverterParameter=识别码, Converter={StaticResource SearchTypeEnumConverter}, Mode=TwoWay}" Content="识别码" Style="{StaticResource RadioButtonStyle}"  GroupName="RB3" Template="{DynamicResource RadioButtonControlTemplate1}"/>
                                        <RadioButton Click="SaveAllSearchType"   IsChecked="{Binding AllSearchType, ConverterParameter=名称, Converter={StaticResource SearchTypeEnumConverter},Mode=TwoWay}"   Content="名称" Style="{StaticResource RadioButtonStyle}" GroupName="RB3" Template="{DynamicResource RadioButtonControlTemplate1}"/>
                                        <RadioButton Click="SaveAllSearchType"   IsChecked="{Binding AllSearchType, ConverterParameter=演员, Converter={StaticResource SearchTypeEnumConverter}, Mode=TwoWay}"   Content="演员" Style="{StaticResource RadioButtonStyle}" GroupName="RB3" Template="{DynamicResource RadioButtonControlTemplate1}"/>
                                    </StackPanel>
                                </Border>
                            </Popup>
                        </Grid>




                        <TextBox ToolTip="搜索 识别码、演员、名称" x:Name="AllSearchTextBox"  PreviewKeyUp="SearchTextBox_PreviewKeyUp" TextChanged="SearchTextBox_TextChanged"  Style="{StaticResource SearchTextBox}" Text=""  GotFocus="SearchTextBox_GotFocus" LostFocus="SearchTextBox_LostFocus" CaretBrush="{DynamicResource ForegroundSearch}"   FontSize="16"  HorizontalAlignment="Stretch" VerticalAlignment="Center" Margin="40 0 40 0" Background="Transparent" BorderThickness="0"  >
                            <TextBox.ContextMenu>
                                <ContextMenu>
                                    <MenuItem Command="ApplicationCommands.Copy" />
                                    <MenuItem Command="ApplicationCommands.Cut" />
                                    <MenuItem Command="ApplicationCommands.Paste" />
                                    <MenuItem Command="ApplicationCommands.SelectAll" />
                                    <MenuItem Command="ApplicationCommands.Undo" />
                                </ContextMenu>
                            </TextBox.ContextMenu>
                        </TextBox>

                        <Popup Focusable="True"  VerticalOffset="10"  HorizontalOffset="-35"   Opacity="0.85"   x:Name="AllSearchPopup" Width="155" Visibility="Visible" PlacementTarget="{Binding ElementName=AllSearchTextBox}" AllowsTransparency="True" Placement="Bottom" IsOpen="False" StaysOpen="True" >
                            <Border  Panel.ZIndex="3" Width="150" Height="auto" Background="{DynamicResource BackgroundMenu}"    CornerRadius="5" Canvas.Top="40">
                                <ScrollViewer   Margin="5 5 5 5" Width="140" Height="200"  Canvas.Top="40" Panel.ZIndex="4" Background="Transparent"  PreviewMouseWheel="scrollViewer_PreviewMouseWheel"   x:Name="scrollViewer"      HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Hidden">
                                    <ItemsControl   ItemsSource="{Binding AllSearchCandidate}" ScrollViewer.VerticalScrollBarVisibility="Disabled"  >
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <StackPanel   Orientation="Vertical" >

                                                </StackPanel>
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>

                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <StackPanel>
                                                    <TextBlock Width="120" Padding="0 2"   MouseLeftButtonUp="SetSearchValue" Text="{Binding }"    Style="{StaticResource SearchCandidateTextBlock }"/>
                                                </StackPanel>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </ScrollViewer>
                            </Border>
                        </Popup>


                        <Image Height="20" Width="20"    HorizontalAlignment="Right" Margin="0 0 10 0" MouseLeftButtonDown="ClearSearch" Source="{Binding Themes, Mode=OneWay, ConverterParameter=close,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}"   />




                    </Grid>
                </StackPanel>
                <StackPanel Height="auto"  Margin="2,150,2,0" VerticalAlignment="Stretch"  >
                    <Grid>
                        <Image  Source="{Binding Themes, Mode=OneWay, ConverterParameter=all,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="22" HorizontalAlignment="Left" Panel.ZIndex="2" Margin="25 0"    />
                        <RadioButton x:Name="AllRB"  IsChecked="False" Style="{StaticResource RadioButtonStyleSide}"  Command="{Binding ResetCommand}" Content="所有视频" Click="ShowMovieGrid"   />
                    </Grid>

                    <Grid>
                        <Image  Source="{Binding Themes, Mode=OneWay, ConverterParameter=like,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="22" HorizontalAlignment="Left" Panel.ZIndex="2" Margin="25 0"    />
                        <RadioButton Style="{StaticResource RadioButtonStyleSide}" Command="{Binding FavoritesCommand}" Content="我的喜爱"  Click="ShowMovieGrid"  />
                    </Grid>
                    <RadioButton Style="{StaticResource RadioButtonStyleSide}" Command="{Binding UncensoredCommand}" Content="步兵" Click="ShowMovieGrid" Checked="RadioButton_Checked"  />
                    <RadioButton Style="{StaticResource RadioButtonStyleSide}" Command="{Binding CensoredCommand}" Content="骑兵" Click="ShowMovieGrid"  />
                    <RadioButton Style="{StaticResource RadioButtonStyleSide}" Command="{Binding EuropeCommand}" Content="欧美" Click="ShowMovieGrid"  />
                    <RadioButton Style="{StaticResource RadioButtonStyleSide}"  Content="+" Click="ShowMovieGrid"  />
                    <TextBlock  Text="" Height="40"  />
                    <Grid>
                        <Image  Source="{Binding Themes, Mode=OneWay, ConverterParameter=genre,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="22" HorizontalAlignment="Left" Panel.ZIndex="2" Margin="25 0"    />
                        <RadioButton Style="{StaticResource RadioButtonStyleSide}" Command="{Binding GenreCommand}" Content="按类别"  Click="ShowGenreGrid" />
                    </Grid>
                    <Grid>
                        <Image  Source="{Binding Themes, Mode=OneWay, ConverterParameter=actor,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="22" HorizontalAlignment="Left" Panel.ZIndex="2" Margin="25 0"    />
                        <RadioButton Style="{StaticResource RadioButtonStyleSide}" Command="{Binding ActorCommand}" Content="按演员" Click="ShowActorGrid" />
                    </Grid>
                    <Grid>
                        <Image  Source="{Binding Themes, Mode=OneWay, ConverterParameter=label,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="22" HorizontalAlignment="Left" Panel.ZIndex="2" Margin="25 0"    />
                        <RadioButton Style="{StaticResource RadioButtonStyleSide}" Command="{Binding LabelCommand}" Content="按标签"  Click="ShowLabelGrid" />
                    </Grid>
                    <Grid>
                        <Button Content="Test" Click="Button_Click_3" Visibility="Collapsed"/>

                    </Grid>

                </StackPanel>


            </Grid>


            <Grid Margin="180 0 0 0"   Width="auto"  Background="Transparent">
                <Grid.Style>
                    <Style TargetType="{x:Type Grid}">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding ShowSideBar}" Value="True">
                                <DataTrigger.EnterActions>
                                    <BeginStoryboard  >
                                        <Storyboard>
                                            <ThicknessAnimationUsingKeyFrames Storyboard.TargetProperty="Margin" BeginTime="00:00:00">
                                                <SplineThicknessKeyFrame KeyTime="00:00:00" Value="180 0 0 0" />
                                                <SplineThicknessKeyFrame KeyTime="00:00:0.2" Value="0" />
                                            </ThicknessAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </DataTrigger.EnterActions>
                                <DataTrigger.ExitActions>
                                    <BeginStoryboard  >
                                        <Storyboard>
                                            <ThicknessAnimationUsingKeyFrames Storyboard.TargetProperty="Margin" BeginTime="00:00:00">
                                                <SplineThicknessKeyFrame KeyTime="00:00:00" Value="0" />
                                                <SplineThicknessKeyFrame KeyTime="00:00:0.2" Value="180 0 0 0" />
                                            </ThicknessAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </DataTrigger.ExitActions>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Grid.Style>


                <Border  Background="{DynamicResource BackgroundTitle}" x:Name="TopBorder" Width="auto" HorizontalAlignment="Stretch" Height="40"  CornerRadius="0" BorderBrush="{DynamicResource BorderBursh}" BorderThickness="0" VerticalAlignment="Top" MouseMove="MoveWindow"  >
                </Border>
                
                <DockPanel Panel.ZIndex="5" Height="40" VerticalAlignment="Top" Margin="0 0 5 0" >
                    <Grid Panel.ZIndex="4" >

                        <ComboBox SelectionChanged="DatabaseComboBox_SelectionChanged" x:Name="DatabaseComboBox" ItemsSource="{Binding DataBases}"   Width="150"  Height="30" HorizontalAlignment="Right" Margin="250 5" ToolTip="{Binding RelativeSource={RelativeSource Mode=Self},Path=Text}" >

                        </ComboBox>
                        <StackPanel Panel.ZIndex="5" Orientation="Horizontal" HorizontalAlignment="Right">
                            <Border ToolTip="皮肤"  x:Name="SkinBorder"   Height="27" Width="27" Margin="5 0" CornerRadius="3" Style="{StaticResource BorderStyle}" MouseLeftButtonUp="ShowSkinPopup">
                                <Image Source="{Binding Themes, Mode=OneWay, ConverterParameter=skin,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="20" Width="20"   Visibility="Visible" />
                            </Border>

                            <Border  ToolTip="选项" ContextMenuService.IsEnabled="False" x:Name="SettingsBorder" Width="27" Height="27"  Margin="5 0"  CornerRadius="3" Style="{StaticResource BorderStyle}"  MouseLeftButtonUp="ShowSettingsPopup">
                                <Image Source="{Binding Themes, Mode=OneWay, ConverterParameter=setting,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="20" Width="20" Margin="4,4,3.2,0" VerticalAlignment="Top"   />

                                <Border.ContextMenu >
                                    <ContextMenu  StaysOpen="False" x:Name="SettingsContextMenu" VerticalOffset="10" HorizontalOffset="-30" Placement="Bottom"  Margin="2" >
                                        <ContextMenu.Effect>
                                                    <DropShadowEffect BlurRadius="15" Direction="-90" RenderingBias="Quality" ShadowDepth="2"/>
                                            </ContextMenu.Effect>

                                                <MenuItem   Header="设置" Click="OpenSet_MouseDown"  />
                                        <MenuItem   Header="工具"  Click="OpenTools"    />
                                        <MenuItem   Header="库管理"  Click="OpenDataBase"    />
                                        <MenuItem   Header="关于" >
                                            <MenuItem  Header="关于 Jvedio" Click="ShowAbout"     />
                                            <MenuItem  Header="帮助" Click="OpenHelp"   />
                                            <MenuItem  Header="反馈" Click="OpenFeedBack"  />
                                            <MenuItem Header="官网" Click="OpenJvedioWebPage"/>
                                            <MenuItem  Header="鸣谢"   Click="ShowThanks"  />
                                        </MenuItem>
                                        <MenuItem  Header="升级" PreviewMouseLeftButtonUp="ShowUpdate"   />
                                        <MenuItem  Header="安全" Visibility="Collapsed"  >
                                            <MenuItem Header="备份与恢复"/>
                                        </MenuItem>
                                        <MenuItem  Header="赞助"   Click="OpenThanks"  />
                                    </ContextMenu>
                                </Border.ContextMenu>


                            </Border>

                            <Border  ToolTip="全屏"   Height="27" Width="27" Margin="5 0" CornerRadius="3" Style="{StaticResource BorderStyle}" MouseLeftButtonUp="FullScreen" >
                                <Image Source="{Binding Themes, Mode=OneWay, ConverterParameter=fullscreen,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="20" Width="20"  />
                            </Border>
                            <Border  ToolTip="最小化"   Height="27" Width="27" Margin="5 0" CornerRadius="3" Style="{StaticResource BorderStyle}" MouseLeftButtonUp="MinWindow" >
                                <Image Source="{Binding Themes, Mode=OneWay, ConverterParameter=min,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="20" Width="20"  />
                            </Border>
                            <Border  Height="27" Width="27" Margin="5 0" CornerRadius="3" Style="{StaticResource BorderStyle}" MouseLeftButtonUp="MaxWindow">
                                <Image  ToolTip="最大化"  Source="{Binding Themes, Mode=OneWay, ConverterParameter=max,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="20" Width="20"   />
                            </Border>
                            <Border  ToolTip="退出"   Height="27" Width="27" Margin="5 0" CornerRadius="3" Style="{StaticResource CloseBorderStyle}" MouseLeftButtonUp="CloseWindow">
                                <Image Source="{Binding Themes, Mode=OneWay, ConverterParameter=close,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="20" Width="20"   />
                            </Border>
                        </StackPanel>



                        <Popup VerticalOffset="10" HorizontalOffset="-40" x:Name="SkinPopup" Placement="Bottom" PopupAnimation="Fade"  PlacementTarget="{Binding ElementName=SkinBorder}" AllowsTransparency="True" StaysOpen="False" IsOpen="False">
                            <Border Background="{DynamicResource BackgroundMenu}"  Margin="2" >
                                <Border.Effect>
                                    <DropShadowEffect BlurRadius="15" Direction="-90" RenderingBias="Quality" ShadowDepth="2"/>
                                </Border.Effect>
                                <StackPanel   Panel.ZIndex="7" Background="Transparent" Orientation="Vertical" Margin="5" Width="100">
                                    <Button  Style="{StaticResource SetButton}" Content="黑色" Click="SetSkinProperty" />
                                    <Button  Style="{StaticResource SetButton}"  Content="白色"  Click="SetSkinProperty"   />
                                    <Button  Style="{StaticResource SetButton}"  Content="蓝色" Click="SetSkinProperty"  />
                                </StackPanel>
                            </Border>
                        </Popup>
                        <Popup Focusable="True" VerticalOffset="-20" HorizontalOffset="-40" x:Name="NotifyPopup" Placement="MousePoint" PopupAnimation="Fade"   AllowsTransparency="True" StaysOpen="False" IsOpen="False" LostFocus="Notify_LostFocus">
                            <Border Background="{DynamicResource BackgroundMenu}"  Margin="2" >
                                <Border.Effect>
                                    <DropShadowEffect BlurRadius="15" Direction="-90" RenderingBias="Quality" ShadowDepth="2"/>
                                </Border.Effect>
                                <StackPanel   Panel.ZIndex="7" Background="Transparent" Orientation="Vertical" Margin="5" Width="150">
                                    <Button  Style="{StaticResource SetButton}" Content="打开Jvedio" Click="Notify_Show" />
                                    <Button  Style="{StaticResource SetButton}"  Content="退出"  Click="Notify_Close"   />
                                </StackPanel>
                            </Border>
                        </Popup>


                        <Border  Height="27" Width="27" Margin="5 0" CornerRadius="3" Style="{StaticResource BorderStyle}" HorizontalAlignment="Left" MouseLeftButtonUp="ShowSideBar">
                            <Image Source="{Binding Themes, Mode=OneWay, ConverterParameter=option,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="20" Width="20"   Visibility="Visible" />
                        </Border>
                    </Grid>

                </DockPanel>



                <!--影片-->
                <DockPanel LastChildFill="True"  x:Name="Grid_Movie"  Margin="5 50 5 5" Visibility="Visible" >
                    <Grid  DockPanel.Dock="Top"    VerticalAlignment="Top" Height="50" Margin="5 0 5 10" Panel.ZIndex="4"  Visibility="{Binding DisplayFunBar, Converter={StaticResource BoolToVis}, Mode=TwoWay, Source={x:Static p:Settings.Default}}">
                        <Border CornerRadius="5" Background="{DynamicResource  BackgroundTitle}" HorizontalAlignment="Stretch" Width="auto"/>

                        <StackPanel x:Name="FunStackPanel" Orientation="Horizontal"  VerticalAlignment="Center" HorizontalAlignment="Stretch" Margin="10 0"  Width="auto">

                            <Grid  x:Name="SortGrid"  Width="110" HorizontalAlignment="Left" MouseUp="ShowMenu" Cursor="Hand" Height="30"  Margin="5 0">
                                <Border    CornerRadius="5" Background="{DynamicResource BackgroundTab}" Width="110" HorizontalAlignment="Left"/>
                                <TextBlock    x:Name="SortLabel"  Text="{Binding SortType, Mode=TwoWay, Source={x:Static p:Settings.Default}}" Width="80" Margin="-20 0 0 0"  VerticalAlignment="Center" TextAlignment="Center" Foreground="{DynamicResource ForegroundGlobal}" FontSize="12" FontFamily="微软雅黑"/>
                                <TextBlock   x:Name="SortArrow" Margin="80 0 0 0" Text="↓" Width="20" HorizontalAlignment="Stretch" TextAlignment="Center" VerticalAlignment="Center" Foreground="{DynamicResource ForegroundSearch}" FontSize="12" FontFamily="微软雅黑" FontWeight="Bold"/>

                                <Popup Width="120"  PopupAnimation="Fade" Height="350" PlacementTarget="{Binding ElementName=SortGrid}" Placement="Bottom" AllowsTransparency="True" StaysOpen="False" IsOpen="False">
                                    <Canvas   Opacity="0.85"    Width="100" HorizontalAlignment="Left" >
                                        <Polygon Panel.ZIndex="1"  Points="50,20 20,50 70,50"  Fill="{DynamicResource BackgroundMenu}" Cursor="Hand" Canvas.Top="-15" Canvas.Left="10" >
                                            <Polygon.Effect>
                                                <DropShadowEffect/>
                                            </Polygon.Effect>
                                        </Polygon>
                                        <Rectangle Panel.ZIndex="2"  Width="110" Height="300" Fill="{DynamicResource BackgroundMenu}"  StrokeThickness="0" RadiusX="5" RadiusY="5"  Canvas.Top="20">
                                            <Rectangle.Effect>
                                                <DropShadowEffect/>
                                            </Rectangle.Effect>
                                        </Rectangle>

                                        <StackPanel Panel.ZIndex="3"  Background="Transparent" Orientation="Vertical" Width="100" Height="auto" Canvas.Left="5" Canvas.Top="30">
                                            <Label MouseUp="SetSortValue" Style="{StaticResource BaseLabel}" Content="识别码" HorizontalContentAlignment="Center"/>
                                            <Label MouseUp="SetSortValue" Style="{StaticResource BaseLabel}"  Content="文件大小" HorizontalContentAlignment="Center"/>
                                            <Label MouseUp="SetSortValue"  Style="{StaticResource BaseLabel}" Content="创建时间" HorizontalContentAlignment="Center"/>
                                            <Label MouseUp="SetSortValue" Style="{StaticResource BaseLabel}"  Content="喜爱程度" HorizontalContentAlignment="Center"/>
                                            <Label MouseUp="SetSortValue" Style="{StaticResource BaseLabel}"  Content="名称" HorizontalContentAlignment="Center"/>
                                            <Label MouseUp="SetSortValue" Style="{StaticResource BaseLabel}"  Content="访问次数" HorizontalContentAlignment="Center"/>
                                            <Label MouseUp="SetSortValue" Style="{StaticResource BaseLabel}"  Content="发行日期" HorizontalContentAlignment="Center"/>
                                            <Label MouseUp="SetSortValue" Style="{StaticResource BaseLabel}"  Content="评分" HorizontalContentAlignment="Center"/>
                                            <Label MouseUp="SetSortValue" Style="{StaticResource BaseLabel}"  Content="时长" HorizontalContentAlignment="Center"/>
                                            <Label MouseUp="SetSortValue" Style="{StaticResource BaseLabel}"  Content="演员" HorizontalContentAlignment="Center"/>
                                        </StackPanel>
                                    </Canvas>
                                </Popup>

                            </Grid>




                            <Grid  x:Name="ViewGrid"    Width="100" HorizontalAlignment="Left" MouseUp="ShowMenu" Cursor="Hand" Height="30" Margin="5 0">
                                <Border CornerRadius="5" Background="{DynamicResource BackgroundTab}"  />
                                <Image Source="{Binding Themes, Mode=OneWay, ConverterParameter=view,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="24" HorizontalAlignment="Left" Margin="3 0"></Image>
                                <TextBlock Text="{Binding ShowViewMode, Mode=TwoWay, Source={x:Static p:Settings.Default}}" HorizontalAlignment="Center" VerticalAlignment="Center" TextAlignment="Center" Foreground="{DynamicResource ForegroundGlobal}" FontSize="12" FontFamily="微软雅黑"/>
                                <Path Margin="2 0" x:Name="Arrow" Grid.Column="1" Fill="Gray" HorizontalAlignment="Right" VerticalAlignment="Center" Data="M 0 0 L 4 4 L 8 0 Z"/>

                                <Popup   Width="500"  PopupAnimation="Fade" Height="170" PlacementTarget="{Binding ElementName=ViewGrid}" Placement="Bottom" AllowsTransparency="True" StaysOpen="False" IsOpen="False">
                                    <Canvas Margin="0 0" Focusable="True"   Opacity="0.85"   x:Name="ViewMenu" Width="100" HorizontalAlignment="Left" Visibility="Visible" >
                                        <Polygon Panel.ZIndex="3" Points="50,20 20,50 70,50" Stroke="{DynamicResource BackgroundMenu}" Fill="{DynamicResource BackgroundMenu}" Cursor="Hand"  Canvas.Left="-10" Canvas.Top="-15">
                                            <Polygon.Effect>
                                                <DropShadowEffect/>
                                            </Polygon.Effect>
                                        </Polygon>
                                        <Rectangle Panel.ZIndex="3" Width="90" Height="100" Fill="{DynamicResource BackgroundMenu}"  StrokeThickness="0" RadiusX="5" RadiusY="5"  Canvas.Top="20">
                                            <Rectangle.Effect>
                                                <DropShadowEffect/>
                                            </Rectangle.Effect>
                                        </Rectangle>

                                        <StackPanel Panel.ZIndex="4" Background="Transparent" Orientation="Vertical" Width="80" Height="90" Canvas.Top="25" Margin="5 0">
                                            <RadioButton  Click="SaveShowViewMode"  IsChecked="{Binding ShowViewMode, ConverterParameter=默认, Converter={StaticResource ViewTypeEnumConverter}, Mode=TwoWay}" Content="默认" Style="{StaticResource RadioButtonStyle}"  GroupName="RB1" Template="{DynamicResource RadioButtonControlTemplate1}"/>
                                            <RadioButton  Click="SaveShowViewMode"   IsChecked="{Binding ShowViewMode, ConverterParameter=有图, Converter={StaticResource ViewTypeEnumConverter}, Mode=TwoWay}"   Content="有图" Style="{StaticResource RadioButtonStyle}" GroupName="RB1" Template="{DynamicResource RadioButtonControlTemplate1}"/>
                                            <RadioButton  Click="SaveShowViewMode"   IsChecked="{Binding ShowViewMode, ConverterParameter=无图, Converter={StaticResource ViewTypeEnumConverter}, Mode=TwoWay}"   Content="无图" Style="{StaticResource RadioButtonStyle}" GroupName="RB1" Template="{DynamicResource RadioButtonControlTemplate1}"/>
                                        </StackPanel>
                                    </Canvas>
                                </Popup>
                            </Grid>


                            <Grid x:Name="ImageGrid"  Width="100" HorizontalAlignment="Left" MouseUp="ShowMenu" Cursor="Hand" Height="30" Margin="5 0">
                                <Border CornerRadius="5" Background="{DynamicResource BackgroundTab}"  />
                                <Image Source="{Binding Themes, Mode=OneWay, ConverterParameter=image,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="24" HorizontalAlignment="Left" Margin="3 0"></Image>
                                <TextBlock Text="{Binding ShowImageMode, Mode=TwoWay, Source={x:Static p:Settings.Default}}" HorizontalAlignment="Center" VerticalAlignment="Center" TextAlignment="Center" Foreground="{DynamicResource ForegroundGlobal}" FontSize="12" FontFamily="微软雅黑"/>

                                <Path Margin="2 0"  Grid.Column="1" Fill="Gray" HorizontalAlignment="Right" VerticalAlignment="Center" Data="M 0 0 L 4 4 L 8 0 Z"/>

                                <Popup   Width="500"  PopupAnimation="Fade" Height="170" PlacementTarget="{Binding ElementName=ImageGrid}" Placement="Bottom" AllowsTransparency="True" StaysOpen="False" IsOpen="False">

                                    <Canvas Focusable="True"  Opacity="0.85"   x:Name="ImageMenu" Width="auto" HorizontalAlignment="Left" >
                                        <Polygon Panel.ZIndex="3" Points="50,20 20,50 70,50" Stroke="{DynamicResource BackgroundMenu}" Fill="{DynamicResource BackgroundMenu}" Cursor="Hand"   Canvas.Top="-15">
                                            <Polygon.Effect>
                                                <DropShadowEffect/>
                                            </Polygon.Effect>
                                        </Polygon>
                                        <Rectangle Panel.ZIndex="3" Width="100" Height="105" Fill="{DynamicResource BackgroundMenu}"  StrokeThickness="0" RadiusX="5" RadiusY="5"  Canvas.Top="20">
                                            <Rectangle.Effect>
                                                <DropShadowEffect/>
                                            </Rectangle.Effect>
                                        </Rectangle>

                                        <StackPanel Panel.ZIndex="4" Background="Transparent" Orientation="Vertical" Width="90" Height="90" Canvas.Top="25" Margin="5 0">
                                            <RadioButton Click="SaveShowImageMode" IsChecked="{Binding ShowImageMode, ConverterParameter=缩略图, Converter={StaticResource ImageTypeEnumConverter}, Mode=TwoWay}" Content="缩略图" Style="{StaticResource RadioButtonStyle}"  GroupName="RB2" Template="{DynamicResource RadioButtonControlTemplate1}"/>
                                            <RadioButton Click="SaveShowImageMode"   IsChecked="{Binding ShowImageMode, ConverterParameter=海报图, Converter={StaticResource ImageTypeEnumConverter}, Mode=TwoWay}"   Content="海报图" Style="{StaticResource RadioButtonStyle}" GroupName="RB2" Template="{DynamicResource RadioButtonControlTemplate1}"/>
                                            <RadioButton Click="SaveShowImageMode"   IsChecked="{Binding ShowImageMode, ConverterParameter=预览图, Converter={StaticResource ImageTypeEnumConverter}, Mode=TwoWay}"   Content="预览图" Style="{StaticResource RadioButtonStyle}" GroupName="RB2" Template="{DynamicResource RadioButtonControlTemplate1}"/>
                                            <!--<RadioButton Click="SaveShowImageMode"   IsChecked="{Binding ShowImageMode, ConverterParameter=列表, Converter={StaticResource ImageTypeEnumConverter}, Mode=TwoWay}"   Content="列表" Style="{StaticResource RadioButtonStyle}" GroupName="RB2" Template="{DynamicResource RadioButtonControlTemplate1}"/>-->
                                        </StackPanel>
                                    </Canvas>
                                </Popup>
                            </Grid>



                            <CheckBox Visibility="Collapsed" Foreground="{DynamicResource ForegroundGlobal}"  IsChecked="{Binding OnlyShowPlay, Mode=TwoWay, Source={x:Static p:Settings.Default}}"  Height="30" Content="仅可播放"  HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Margin="5 0" HorizontalAlignment="Left" />
                            <Grid x:Name="DownloadGrid"   Width="auto" HorizontalAlignment="Left"  MouseLeftButtonUp="ShowDownloadMenu" Cursor="Hand" Height="30" Margin="5 0">
                                <Border CornerRadius="5" Background="{DynamicResource BackgroundTab}"  />
                                <Image Source="Resources/Picture/download.png" Height="24" HorizontalAlignment="Left" Margin="3 0"></Image>
                            </Grid>

                            <Grid x:Name="ScanFileGrid"   Width="auto" HorizontalAlignment="Left"  MouseLeftButtonUp="RefreshScanPath" Cursor="Hand" Height="30" Margin="5 0" ToolTip="刷新文件夹">
                                <Border CornerRadius="5"  >
                                    <Border.Style>
                                        <Style TargetType="{x:Type Border}">
                                            <Setter Property="Background" Value="{DynamicResource BackgroundTab}"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding IsScanning}" Value="True">
                                                    <Setter Property="Background" Value="LightYellow"/>
                                                    <DataTrigger.EnterActions>
                                                        <BeginStoryboard  >
                                                            <Storyboard>
                                                                <DoubleAnimation   From="1" To="0.5" Duration="0:0:0.5" Storyboard.TargetProperty="Opacity" RepeatBehavior="Forever" />
                                                            </Storyboard>
                                                        </BeginStoryboard>
                                                    </DataTrigger.EnterActions>
                                                    <DataTrigger.ExitActions>
                                                        <BeginStoryboard  >
                                                            <Storyboard>
                                                                <DoubleAnimation   From="0" To="1" Duration="0:0:0.2" Storyboard.TargetProperty="Opacity"/>
                                                           </Storyboard>
                                                        </BeginStoryboard>
                                                    </DataTrigger.ExitActions>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Border.Style>
                                </Border>
                                <Image  Height="24" HorizontalAlignment="Left" Margin="3 0">
                                    <Image.Style>
                                        <Style TargetType="Image">
                                            <Setter Property='Source' Value="Resources/Picture/刷新文件夹.png"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding IsScanning}" Value="True">
                                                    <Setter Property="Source" Value="Resources/Picture/停止.png"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Image.Style>
                                    
                                    
                                </Image>
                            </Grid>


                            <Grid   Width="auto" HorizontalAlignment="Left"  MouseLeftButtonUp="RandomDisplay" Cursor="Hand" Height="30" Margin="5 0" ToolTip="随机展示">
                                <Border CornerRadius="5" Background="{DynamicResource BackgroundTab}" >
                                </Border>
                                <Image  Height="24" Width="24" HorizontalAlignment="Left" Margin="3 0" Source="Resources/Picture/随机.png">
                                </Image>
                            </Grid>

                            
                            <Popup  VerticalOffset="10" HorizontalOffset="-20" x:Name="DownloadPopup" Placement="Bottom" PopupAnimation="Fade"  PlacementTarget="{Binding ElementName=DownloadGrid}" AllowsTransparency="True" StaysOpen="False" IsOpen="False">
                                <Border Background="{DynamicResource BackgroundMenu}"   Margin="2" >
                                    <Border.Effect>
                                        <DropShadowEffect BlurRadius="15" Direction="-90" RenderingBias="Quality" ShadowDepth="2"/>
                                    </Border.Effect>
                                    <StackPanel  Panel.ZIndex="7" Background="Transparent" Orientation="Vertical" Width="100" Height="auto" Margin="5" >
                                        <Button  Style="{StaticResource SetButton}" Content="刮削本页" Click="Button_StartDownload" />
                                        <Button  Style="{StaticResource SetButton}"  Content="停止刮削"  Click="Button_StopDownload"    />
                                    </StackPanel>
                                </Border>
                            </Popup>
                            <CheckBox  Click="CheckBox_Click" Foreground="{DynamicResource ForegroundGlobal}"  IsChecked="{Binding EditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}}"  Height="30" Content="多选"  HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Margin="5 0" HorizontalAlignment="Left" />


                            <!--在当前下搜索-->
                            <Grid Visibility="Collapsed" x:Name="SearchGrid"  Height="40" Width="250"  Margin="5 0" HorizontalAlignment="Right" >
                                <Border Style="{StaticResource SearchTextGrid}" CornerRadius="20"  Background="{DynamicResource BackgroundSearch}" BorderThickness="2" >
                                </Border>
                                <Canvas Height="25" Width="25"    HorizontalAlignment="Left" Margin="10 0 0 0" MouseDown="SearchContent">
                                    <Ellipse Style="{StaticResource Ellipse}" Width="16" Height="16"  Canvas.Left="3" Canvas.Top="3" />
                                    <Ellipse Style="{StaticResource Ellipse}" Width="10" Height="10" Fill="{DynamicResource BackgroundSearch}" Canvas.Left="6" Canvas.Top="6" />
                                    <Line Style="{StaticResource Line}" X1="16" Y1="16" X2="22" Y2="22" StrokeThickness="2.5"  />
                                </Canvas>

                                <TextBox x:Name="SearchTextBox"  ToolTip="二次搜索" PreviewKeyUp="SearchTextBox_PreviewKeyUp" TextChanged="SearchTextBox_TextChanged"  Style="{StaticResource SearchTextBox}" Text=""  GotFocus="SearchTextBox_GotFocus" LostFocus="SearchTextBox_LostFocus" CaretBrush="{DynamicResource ForegroundSearch}"   FontSize="16"  HorizontalAlignment="Stretch" VerticalAlignment="Center" Margin="40 0 40 0" Background="Transparent" BorderThickness="0"  />
                                <Grid Width="25"  Panel.ZIndex="3" HorizontalAlignment="Right" Margin="0 0 10 0" MouseDown="ShowSearchMenu" Cursor="Hand">
                                    <Image Source="{Binding Themes, Mode=OneWay, ConverterParameter=search,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="25" Width="25"/>

                                    <Canvas Focusable="True"    Opacity="0.85"    Width="40" Visibility="Hidden" >
                                        <Polygon Panel.ZIndex="3" Points="50,20 20,50 70,50" Stroke="{DynamicResource BackgroundMenu}" Fill="{DynamicResource BackgroundMenu}" Cursor="Hand"  Canvas.Left="-35" Canvas.Top="10">
                                            <Polygon.Effect>
                                                <DropShadowEffect/>
                                            </Polygon.Effect>
                                        </Polygon>
                                        <Rectangle Panel.ZIndex="3" Width="90" Height="110" Fill="{DynamicResource BackgroundMenu}"  StrokeThickness="0" RadiusX="5" RadiusY="5" Canvas.Left="-25" Canvas.Top="50">
                                            <Rectangle.Effect>
                                                <DropShadowEffect/>
                                            </Rectangle.Effect>
                                        </Rectangle>

                                        <StackPanel Panel.ZIndex="4" Background="Transparent" Orientation="Vertical" Width="80" Height="auto" Canvas.Left="-20" Canvas.Top="60">
                                            <RadioButton Click="SaveSearchType" IsChecked="{Binding SearchType, ConverterParameter=识别码, Converter={StaticResource SearchTypeEnumConverter}, Mode=TwoWay}" Content="识别码" Style="{StaticResource RadioButtonStyle}"  GroupName="RB4" Template="{DynamicResource RadioButtonControlTemplate1}"/>
                                            <RadioButton Click="SaveSearchType"   IsChecked="{Binding SearchType, ConverterParameter=名称, Converter={StaticResource SearchTypeEnumConverter},Mode=TwoWay}"   Content="名称" Style="{StaticResource RadioButtonStyle}" GroupName="RB4" Template="{DynamicResource RadioButtonControlTemplate1}"/>
                                            <RadioButton Click="SaveSearchType"   IsChecked="{Binding SearchType, ConverterParameter=演员, Converter={StaticResource SearchTypeEnumConverter}, Mode=TwoWay}"   Content="演员" Style="{StaticResource RadioButtonStyle}" GroupName="RB4" Template="{DynamicResource RadioButtonControlTemplate1}"/>
                                        </StackPanel>
                                    </Canvas>



                                </Grid>

                                <Canvas Focusable="True"    Opacity="0.85"   x:Name="SearchCandidate" Width="200" Visibility="Hidden" >
                                    <Rectangle  Panel.ZIndex="3" Width="200" Height="140" Fill="{DynamicResource BackgroundMenu}"  StrokeThickness="0" RadiusX="5" RadiusY="5" Canvas.Top="45"/>
                                    <ScrollViewer   Margin="5 5 5 5" Width="190" Height="130"  Canvas.Top="40" Panel.ZIndex="4" Background="Transparent"  PreviewMouseWheel="scrollViewer_PreviewMouseWheel"   x:Name="scrollViewer2"      HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Hidden">
                                        <ItemsControl   ItemsSource="{Binding SearchCandidate}" ScrollViewer.VerticalScrollBarVisibility="Disabled"  >
                                            <ItemsControl.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <StackPanel   Orientation="Vertical" >

                                                    </StackPanel>
                                                </ItemsPanelTemplate>
                                            </ItemsControl.ItemsPanel>

                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <StackPanel>
                                                        <TextBlock Width="180" MouseLeftButtonUp="SetSearchValue" Text="{Binding }"    Style="{StaticResource SearchCandidateTextBlock }"/>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </ScrollViewer>
                                </Canvas>

                            </Grid>

                            <Button Visibility="Collapsed" Content="test" Style="{StaticResource ButtonStyleFill}" Width="60" Click="Button_Click" />



                        </StackPanel>
                    </Grid>

                    <Grid Panel.ZIndex="5" DockPanel.Dock="Bottom" Width="auto" HorizontalAlignment="Stretch"  Background="Transparent" VerticalAlignment="Bottom" Height="40" Margin="5 0 5 10" Visibility="{Binding DisplayStatusBar, Converter={StaticResource BoolToVis}, Mode=TwoWay, Source={x:Static p:Settings.Default}}">




                        <Border CornerRadius="5" Background="{DynamicResource  BackgroundTitle}" HorizontalAlignment="Stretch" Width="auto"/>
                        <StackPanel Orientation="Horizontal">
                            <Image  ToolTip="信息"  Source="{Binding Themes, Mode=OneWay, ConverterParameter=info,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" HorizontalAlignment="Left" Height="27" Margin="5"/>
                            <TextBlock Margin="10 0" x:Name="StatusTextBlock"  Text="{Binding TextType}" Foreground="{DynamicResource ForegroundSearch}" Height="auto" VerticalAlignment="Center" Width="auto" HorizontalAlignment="Left" TextAlignment="Center"/>
                            <TextBlock x:Name="CountTextBlock" Text="{Binding MovieCount}" Margin="10 0" Foreground="{DynamicResource ForegroundSearch}" Height="auto" VerticalAlignment="Center" Width="auto" HorizontalAlignment="Left" TextAlignment="Center"/>
                        </StackPanel>


                        <!--页码-->
                        <StackPanel Orientation="Horizontal" Margin="450 2 120 2" VerticalAlignment="Center" HorizontalAlignment="Center"  Background="Transparent" Height="40" Width="auto" >
                            <Canvas  ToolTip="上一页"  PreviewMouseLeftButtonDown="PreviousPage" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="5 -10 30 0"   Cursor="Hand" Width="20" Height="20"   Visibility="Visible">
                                <Ellipse Style="{StaticResource Ellipse2}"  Width="30" Height="30"  VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="0 0 5 5" />
                                <Image  Source="{Binding Themes, Mode=OneWay, ConverterParameter=left,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="20" HorizontalAlignment="Left" Panel.ZIndex="2"  Canvas.Left="3" Canvas.Top="5"    />
                            </Canvas>

                            <StackPanel  Orientation="Horizontal" Height="40" Width="auto">
                                <TextBox GotFocus="TextBox_GotFocus" PreviewKeyDown="TextBox_PreviewKeyDown"  Style="{StaticResource BaseTextBox}"  Padding="10 0"   BorderThickness="0"  Text="{Binding CurrentPage}"  VerticalAlignment="Center" HorizontalAlignment="Stretch" Margin="10 1 10 1"/>
                                <TextBlock Foreground="{DynamicResource ForegroundSearch}" Padding="10 0"  Text="{Binding TotalPage, StringFormat=/\{0\}}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="10 1 10 1"/>
                            </StackPanel>
                            <Canvas  ToolTip="下一页"  PreviewMouseLeftButtonDown="NextPage" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="30 -10 15 0"   Cursor="Hand" Width="20" Height="20"   Visibility="Visible">
                                <Ellipse Style="{StaticResource Ellipse2}"  Width="30" Height="30"  VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="0 0 5 5" />
                                <Image  Source="{Binding Themes, Mode=OneWay, ConverterParameter=right,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="20" HorizontalAlignment="Left" Panel.ZIndex="2"  Canvas.Left="6" Canvas.Top="4"    />
                            </Canvas>

                        </StackPanel>




                        <ProgressBar Visibility="Hidden" Foreground="Green" PreviewMouseLeftButtonUp="ProgressBar_PreviewMouseLeftButtonUp"   Height="20" Margin="240 0 350 0"   VerticalAlignment="Center"  HorizontalAlignment="Left" Width="200" LargeChange="10" />

                        <Grid  ToolTip="网址是否可用"  Panel.ZIndex="5" HorizontalAlignment="Right" Margin="0 0 120 0"  MouseEnter="ShowStatus" MouseLeave="ShowStatus" >
                            <Border x:Name="AllStatus" Panel.ZIndex="4" Background="Red"  CornerRadius="10" Height="20" Width="20" >
                                <Border.Effect>
                                    <BlurEffect Radius="2" KernelType="Box"  RenderingBias="Quality"/>
                                </Border.Effect>
                                <Border.Style>
                                    <Style>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding CheckingUrl}" Value="True">
                                                <DataTrigger.EnterActions>
                                                    <BeginStoryboard x:Name="BorderBeginStoryboard">
                                                        <Storyboard>
                                                            <DoubleAnimation RepeatBehavior="Forever"  From="1" To="0.2" Duration="0:0:1" Storyboard.TargetProperty="Opacity"/>
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </DataTrigger.EnterActions>
                                                <DataTrigger.ExitActions>
                                                    <RemoveStoryboard BeginStoryboardName="BorderBeginStoryboard"/>
                                                </DataTrigger.ExitActions>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Border.Style>



                            </Border>


                            <Popup x:Name="StatusPopup" Placement="Top" PopupAnimation="Fade"  PlacementTarget="{Binding ElementName=AllStatus}" AllowsTransparency="True" StaysOpen="False" IsOpen="False">
                                <Border Background="{DynamicResource BackgroundMenu}" Margin="2">
                                    <Border.Effect>
                                        <DropShadowEffect BlurRadius="15" Direction="-90" RenderingBias="Quality" ShadowDepth="2"/>
                                    </Border.Effect>
                                    <StackPanel  Panel.ZIndex="5" Background="Transparent" Orientation="Vertical" Width="auto" Height="auto" >
                                        <StackPanel Margin="5" Orientation="Horizontal" Visibility="{Binding EnableBus, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}, Source={x:Static p:Settings.Default}}">
                                            <TextBlock Width="50"  Foreground="{DynamicResource ForegroundSearch}" Text="Bus" HorizontalAlignment="Left" TextAlignment="Center"   Margin="5 5"/>
                                            <Ellipse x:Name="BusStatus" Width="15" Height="15" HorizontalAlignment="Right" Fill="Red" Margin="5"/>
                                        </StackPanel>
                                        <StackPanel Margin="5" Orientation="Horizontal" Visibility="{Binding EnableBusEu, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}, Source={x:Static p:Settings.Default}}" >
                                            <TextBlock Width="50"  Foreground="{DynamicResource ForegroundSearch}" Text="BusEu" HorizontalAlignment="Left" TextAlignment="Center"   Margin="5 5"/>
                                            <Ellipse x:Name="BusEuropeStatus" Width="15" Height="15" HorizontalAlignment="Right" Fill="Red" Margin="5 5"/>
                                        </StackPanel>
                                        <StackPanel  Margin="5" Orientation="Horizontal"  Visibility="{Binding EnableLibrary, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}, Source={x:Static p:Settings.Default}}" >
                                            <TextBlock Width="50"  Foreground="{DynamicResource ForegroundSearch}" Text="Library" HorizontalAlignment="Left" TextAlignment="Center"   Margin="5 5"/>
                                            <Ellipse x:Name="LibraryStatus" Width="15" Height="15" HorizontalAlignment="Right" Fill="Red" Margin="5 5"/>
                                        </StackPanel>
                                        <StackPanel  Margin="5" Orientation="Horizontal"   Visibility="{Binding EnableDB, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}, Source={x:Static p:Settings.Default}}" >
                                            <TextBlock Width="50"  Foreground="{DynamicResource ForegroundSearch}" Text="DB" HorizontalAlignment="Left" TextAlignment="Center"   Margin="5 5"/>
                                            <Ellipse x:Name="DBStatus" Width="15" Height="15" HorizontalAlignment="Right" Fill="Red" Margin="5 5"/>
                                        </StackPanel>
                                        <StackPanel  Margin="5" Orientation="Horizontal"   Visibility="{Binding EnableFC2, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}, Source={x:Static p:Settings.Default}}" >
                                            <TextBlock Width="50"  Foreground="{DynamicResource ForegroundSearch}" Text="FC2" HorizontalAlignment="Left" TextAlignment="Center"   Margin="5 5"/>
                                            <Ellipse x:Name="FC2Status" Width="15" Height="15" HorizontalAlignment="Right" Fill="Red" Margin="5 5"/>
                                        </StackPanel>
                                        <StackPanel  Margin="5" Orientation="Horizontal"   Visibility="{Binding Enable321, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}, Source={x:Static p:Settings.Default}}" >
                                            <TextBlock Width="50"  Foreground="{DynamicResource ForegroundSearch}" Text="321" HorizontalAlignment="Left" TextAlignment="Center"   Margin="5 5"/>
                                            <Ellipse x:Name="Jav321Status" Width="15" Height="15" HorizontalAlignment="Right" Fill="Red" Margin="5 5"/>
                                        </StackPanel>
                                        <StackPanel  Margin="5" Orientation="Horizontal"   Visibility="{Binding EnableDMM, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}, Source={x:Static p:Settings.Default}}" >
                                            <TextBlock Width="50"  Foreground="{DynamicResource ForegroundSearch}" Text="DMM" HorizontalAlignment="Left" TextAlignment="Center"   Margin="5 5"/>
                                            <Ellipse x:Name="DMMStatus" Width="15" Height="15" HorizontalAlignment="Right" Fill="Red" Margin="5 5"/>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>
                            </Popup>
                        </Grid>


                        <TextBlock x:Name="TypeTextBlock" Text="其他" Foreground="{DynamicResource ForegroundSearch}" Height="auto" VerticalAlignment="Center" Width="100" HorizontalAlignment="Right" TextAlignment="Center"/>

                    </Grid>


                    <!--演员-->

                    <Grid Visibility="Collapsed" x:Name="ActorInfoGrid"  HorizontalAlignment="Right" Width="200" Height="auto" VerticalAlignment="Stretch" Margin="10">

                       
                        <Border Background="{DynamicResource BackgroundTitle}" Opacity="0.8" CornerRadius="10"/>
                        <ScrollViewer VerticalScrollBarVisibility="Hidden">
                            <StackPanel>
                                <Image  Style="{StaticResource ActorInfoImage}"  />
                                <TextBox Background="Transparent" IsReadOnly="True" Width="auto" Text="{Binding Actress.name}"  FontSize="20" HorizontalAlignment="Center" Foreground="{DynamicResource ForegroundSearch}" FontWeight="Bold" Style="{StaticResource ActorTextBlock}" />

                                <StackPanel Orientation="Horizontal">
                                    <Border MouseLeftButtonUp="EditActress" HorizontalAlignment="Left" VerticalAlignment="Top" Panel.ZIndex="5" Margin="10 3" Style="{StaticResource BorderStyle}" Cursor="Hand" CornerRadius="5">
                                        <Image Source="pack://application:,,,/Resources/Picture/edit.png" Margin="5"  Height="15"  />
                                    </Border>
                                    <Border MouseLeftButtonUp="BeginDownLoadActress" HorizontalAlignment="Left" VerticalAlignment="Top" Panel.ZIndex="5" Margin="0" Style="{StaticResource BorderStyle}" Cursor="Hand" CornerRadius="5">
                                        <Image Source="pack://application:,,,/Resources/Picture/download.png" Margin="5"  Height="20"  />
                                    </Border>
                                </StackPanel>

                                <StackPanel>
                                    <TextBox Text="{Binding Actress.id}" Style="{StaticResource InfoTextBox}" Visibility="Collapsed"  />
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="生日："  Style="{StaticResource ActorInfoTextBlock}" />
                                        <TextBox Text="{Binding Actress.birthday,Mode=TwoWay}" Style="{StaticResource ActorTextBlock}" PreviewKeyUp="SaveActress" />
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="年龄："  Style="{StaticResource ActorInfoTextBlock}" />
                                        <TextBox Text="{Binding Actress.age,Mode=TwoWay}" Style="{StaticResource ActorTextBlock}"  PreviewKeyUp="SaveActress" />
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="出生地："  Style="{StaticResource ActorInfoTextBlock}" />
                                        <TextBox Text="{Binding Actress.birthplace,Mode=TwoWay}" Style="{StaticResource ActorTextBlock}"  PreviewKeyUp="SaveActress" />
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="身高："  Style="{StaticResource ActorInfoTextBlock}" />
                                        <TextBox Text="{Binding Actress.height,Mode=TwoWay}" Style="{StaticResource ActorTextBlock}"  PreviewKeyUp="SaveActress" />
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="罩杯："  Style="{StaticResource ActorInfoTextBlock}"  />
                                        <TextBox Text="{Binding Actress.cup,Mode=TwoWay}" Style="{StaticResource ActorTextBlock}"  PreviewKeyUp="SaveActress" />
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="胸围："  Style="{StaticResource ActorInfoTextBlock}" />
                                        <TextBox Text="{Binding Actress.chest,Mode=TwoWay}" Style="{StaticResource ActorTextBlock}"  PreviewKeyUp="SaveActress" />
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="腰围："  Style="{StaticResource ActorInfoTextBlock}" />
                                        <TextBox Text="{Binding Actress.chest,Mode=TwoWay}" Style="{StaticResource ActorTextBlock}"  PreviewKeyUp="SaveActress" />
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="腰围："  Style="{StaticResource ActorInfoTextBlock}" />
                                        <TextBox Text="{Binding Actress.waist,Mode=TwoWay}" Style="{StaticResource ActorTextBlock}"  PreviewKeyUp="SaveActress" />
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="臀围："  Style="{StaticResource ActorInfoTextBlock}" />
                                        <TextBox Text="{Binding Actress.hipline,Mode=TwoWay}" Style="{StaticResource ActorTextBlock}"  PreviewKeyUp="SaveActress" />
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="爱好："  Style="{StaticResource ActorInfoTextBlock}"  />
                                        <TextBox Text="{Binding Actress.hobby,Mode=TwoWay}" Style="{StaticResource ActorTextBlock}"  PreviewKeyUp="SaveActress" />
                                    </StackPanel>

                                </StackPanel>
                            </StackPanel>
                        </ScrollViewer>
                    </Grid>




                    <Grid Panel.ZIndex="2"  DockPanel.Dock="Top"     Margin="10" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Background="Transparent"   PreviewKeyDown="Grid_PreviewKeyDown"    >
                        <StackPanel x:Name="BeginScanStackPanel" Visibility="Hidden" Panel.ZIndex="5" Orientation="Horizontal" Background="Transparent" Width="300" Height="100" HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="拖入文件夹与视频或 " Style="{StaticResource BaseTextBlock}" VerticalAlignment="Center" FontSize="20"></TextBlock>
                            <Button Content="扫描" Style="{StaticResource ButtonStyleFill}" Height="30" Width="70" Click="Button_Click_4"/>
                        </StackPanel>

                        <Grid x:Name="MovieMainGrid" MouseLeave="MovieMainGrid_MouseLeave">

                            <!--多选操作-->
                            <Canvas Height="auto" Width="auto" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"   Panel.ZIndex="5"   >
                                <Border x:Name="SelectBorder"  Background="Red" Panel.ZIndex="5" Opacity="0.5" PreviewMouseMove="Selecting" MouseLeftButtonUp="EndSelect" ></Border>
                            </Canvas>

                            <!--影片展示-->
                            <ScrollViewer x:Name="ScrollViewer" VerticalScrollBarVisibility="Auto"  ScrollChanged="ScrollViewer_ScrollChanged" PreviewMouseMove="Selecting" IsVisibleChanged="ScrollViewer_IsVisibleChanged"  >
                                <ScrollViewer.ContextMenu>
                                    <ContextMenu>
                                        <MenuItem Header="刷新本页" Click="RefreshCurrentPage" Icon="pack://application:,,,/Resources/menuitem/refresh.png"/>
                                        <MenuItem Header="选择/取消所有" Click="SelectAll" Icon="pack://application:,,,/Resources/menuitem/selectall.png"/>
                                        <MenuItem Header="滚动到最后" Click="ScrollToEnd" Icon="pack://application:,,,/Resources/menuitem/scrolltoend.png"/>
                                    </ContextMenu>
                                </ScrollViewer.ContextMenu>
                                <ItemsControl  x:Name="MovieItemsControl" AlternationCount="999"  ItemsSource="{Binding CurrentMovieList}" ScrollViewer.VerticalScrollBarVisibility="Auto" Background="Transparent" >
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <WrapPanel   Orientation="Horizontal"/>
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>

                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate  >
                                            <WrapPanel x:Name="MovieWrapPanel">
                                                <WrapPanel.RenderTransform>
                                                    <TransformGroup>
                                                        <ScaleTransform/>
                                                    </TransformGroup>
                                                </WrapPanel.RenderTransform>
                                                <Border CornerRadius="3" Background="{DynamicResource BackgroundSide}" Style="{StaticResource ViewBorder}"  MouseEnter="BorderMouseEnter" MouseLeave="BorderMouseLeave"  >

                                                    <Border.Margin>
                                                        <MultiBinding Converter="{StaticResource MultiIntToMarginConverter}">
                                                            <Binding Path="MovieStyle_OutMargin_UD" Mode="OneWay" Source="{x:Static p:Settings.Default}"/>
                                                            <Binding Path="MovieStyle_OutMargin_LR" Mode="OneWay" Source="{x:Static p:Settings.Default}"/>
                                                        </MultiBinding>
                                                    </Border.Margin>
                                                    <StackPanel Style="{StaticResource ViewStackPanel}"  >
                                                        <StackPanel.Margin>
                                                            <MultiBinding Converter="{StaticResource MultiIntToMarginConverter}">
                                                                <Binding Path="MovieStyle_InMargin_UD" Mode="OneWay" Source="{x:Static p:Settings.Default}"/>
                                                                <Binding Path="MovieStyle_InMargin_LR" Mode="OneWay" Source="{x:Static p:Settings.Default}"/>
                                                            </MultiBinding>
                                                        </StackPanel.Margin>
                                                        <StackPanel.ContextMenu>
                                                            <ContextMenu >
                                                                <MenuItem Header="刮削影片"  Icon="pack://application:,,,/Resources/menuitem/download.png" >
                                                                    <MenuItem Header="智能识别" Click="DownLoadSelectMovie"  ></MenuItem>
                                                                    <MenuItem IsEnabled="False" Header="Bus" Click="DownLoadSelectMovie"  ></MenuItem>
                                                                    <MenuItem IsEnabled="False"  Header="BusEu" Click="DownLoadSelectMovie"   ></MenuItem>
                                                                    <MenuItem IsEnabled="False"  Header="Library" Click="DownLoadSelectMovie"   ></MenuItem>
                                                                    <MenuItem IsEnabled="False"  Header="DB" Click="DownLoadSelectMovie"   ></MenuItem>
                                                                    <MenuItem IsEnabled="False"  Header="Fc2Club" Click="DownLoadSelectMovie"   ></MenuItem>
                                                                    <MenuItem IsEnabled="False"  Header="321" Click="DownLoadSelectMovie"   ></MenuItem>
                                                                    <MenuItem IsEnabled="False"  Header="DMM" Click="DownLoadSelectMovie"   ></MenuItem>
                                                                </MenuItem>
                                                                <MenuItem Header="修改信息" Click="EditInfo" Icon="pack://application:,,,/Resources/menuitem/edit.png" />
                                                                <MenuItem Header="翻译影片" Click="TranslateMovie" Icon="pack://application:,,,/Resources/menuitem/translate.png" />
                                                                <MenuItem Header="人工智能" Icon="pack://application:,,,/Resources/menuitem/AI.png">
                                                                    <MenuItem Header="生成缩略图" Click="GenerateSmallImage" Icon="pack://application:,,,/Resources/menuitem/AI_smallimage.png" />
                                                                    <MenuItem Header="生成演员头像" Click="GenerateActor" Icon="pack://application:,,,/Resources/menuitem/AI_actor.png" />
                                                                </MenuItem>
                                                                <MenuItem Header="生成截图" Click="GetScreenShot" Icon="pack://application:,,,/Resources/menuitem/translate.png" />
                                                                <MenuItem Header="标签管理"   Icon="pack://application:,,,/Resources/menuitem/label.png" Click="ShowLabelEditGrid" >
                                                                    <MenuItem Header="添加" Click="AddLabel"  ></MenuItem>
                                                                    <MenuItem Header="删除" Click="DelLabel"  ></MenuItem>
                                                                    <MenuItem Header="清空" Click="ClearLabel"   ></MenuItem>
                                                                </MenuItem>
                                                                <MenuItem Header="修改喜爱"  Icon="pack://application:,,,/Resources/menuitem/like.png" >
                                                                    <MenuItem IsChecked="{Binding favorites, ConverterParameter=0, Converter={StaticResource IntToCheckedConverter}}"  IsCheckable="True" Header="0" Click="SetFavorites"  />
                                                                    <MenuItem IsChecked="{Binding favorites, ConverterParameter=1, Converter={StaticResource IntToCheckedConverter}}"  IsCheckable="True" Header="1" Click="SetFavorites"/>
                                                                    <MenuItem IsChecked="{Binding favorites, ConverterParameter=2, Converter={StaticResource IntToCheckedConverter}}"  IsCheckable="True" Header="2" Click="SetFavorites"/>
                                                                    <MenuItem  IsChecked="{Binding favorites, ConverterParameter=3, Converter={StaticResource IntToCheckedConverter}}"  IsCheckable="True" Header="3" Click="SetFavorites"/>
                                                                    <MenuItem  IsChecked="{Binding favorites, ConverterParameter=4, Converter={StaticResource IntToCheckedConverter}}"  IsCheckable="True" Header="4" Click="SetFavorites"/>
                                                                    <MenuItem  IsChecked="{Binding favorites, ConverterParameter=5, Converter={StaticResource IntToCheckedConverter}}"  IsCheckable="True" Header="5" Click="SetFavorites"/>
                                                                </MenuItem>
                                                                <MenuItem Header="打开位置" Icon="pack://application:,,,/Resources/menuitem/openfolder.png"  >
                                                                    <MenuItem Header="影片" Click="OpenFilePath"  ></MenuItem>
                                                                    <MenuItem Header="海报图" Click="OpenImagePath"  ></MenuItem>
                                                                    <MenuItem Header="缩略图" Click="OpenImagePath"   ></MenuItem>
                                                                    <MenuItem Header="预览图" Click="OpenImagePath"   ></MenuItem>
                                                                    <MenuItem Header="影片截图" Click="OpenImagePath"   ></MenuItem>
                                                                    <MenuItem Header="头像" Click="OpenImagePath"   ></MenuItem>
                                                                </MenuItem>
                                                                <MenuItem Header="打开网址" Click="OpenWeb" Icon="pack://application:,,,/Resources/menuitem/openwebsite.png" />
                                                                <MenuItem Header="复制文件" Click="CopyFile"  Icon="pack://application:,,,/Resources/menuitem/copy.png" />
                                                                <MenuItem Header="从软件删除" Click="DeleteID"  Icon="pack://application:,,,/Resources/menuitem/del.png"  />
                                                                <MenuItem Header="从电脑删除" Click="DeleteFile" Icon="pack://application:,,,/Resources/menuitem/clear.png" />



                                                            </ContextMenu>
                                                        </StackPanel.ContextMenu>


                                                        <Grid  >
                                                            <!--图片-->
                                                            <Image ToolTip="{Binding id}" x:Name="ViewImage"  ImageFailed="Image_ImageFailed" Style="{StaticResource ViewImage}" MouseLeftButtonUp="ShowDetails"  HorizontalAlignment="Center"  VerticalAlignment="Center" />

                                                            <!--显示预览图-->
                                                            <Canvas MouseLeftButtonUp="ShowDetails" x:Name="ExtraImageCanvas"  Background="Transparent"  Height="{Binding Path=ExtraImage_Height,Mode=OneWay, Source={x:Static p:Settings.Default}}" Width="{Binding Path=ExtraImage_Width,Mode=OneWay, Source={x:Static p:Settings.Default}}" MouseLeave="Canvas_MouseLeave" MouseEnter="Canvas_MouseEnter"  Visibility="{Binding ShowImageMode, Converter={StaticResource StringToVisibilityConverter}, Mode=OneWay, Source={x:Static p:Settings.Default}}" >
                                                                <TextBlock Visibility="Collapsed" Text="{Binding RelativeSource={RelativeSource Mode=TemplatedParent},Path=(ItemsControl.AlternationIndex)}" FontSize="16" Foreground="{DynamicResource ForegroundSearch}" Height="20"  ></TextBlock>
                                                                <Image x:Name="myImage"  RenderTransformOrigin="0.5,0.5" Height="{Binding Path=ExtraImage_Height,Mode=OneWay, Source={x:Static p:Settings.Default}}" Width="{Binding Path=ExtraImage_Width,Mode=OneWay, Source={x:Static p:Settings.Default}}">
                                                                    <Image.RenderTransform>
                                                                        <TransformGroup>
                                                                            <TranslateTransform X="0" Y="0" />
                                                                        </TransformGroup>
                                                                    </Image.RenderTransform>
                                                                </Image>
                                                                <Image x:Name="myImage2"  RenderTransformOrigin="0.5,0.5" Height="{Binding Path=ExtraImage_Height,Mode=OneWay, Source={x:Static p:Settings.Default}}" Width="{Binding Path=ExtraImage_Width,Mode=OneWay, Source={x:Static p:Settings.Default}}">
                                                                    <Image.RenderTransform>
                                                                        <TransformGroup>
                                                                            <TranslateTransform X="0" Y="0" />
                                                                        </TransformGroup>
                                                                    </Image.RenderTransform>
                                                                </Image>
                                                            </Canvas>


                                                            <!--分段视频-->
                                                            <Grid  Panel.ZIndex="3" Visibility="{Binding hassubsection,Converter={StaticResource BoolToVisibilityConverter},Mode=OneWay}"  >
                                                                <Image  ToolTip="分段视频"  Cursor="Hand"  Panel.ZIndex="3" Height="24" MouseLeftButtonUp="ShowSubsection"  HorizontalAlignment="Right"  VerticalAlignment="Bottom"  Margin="5"  >
                                                                    <Image.Style>
                                                                        <Style TargetType="Image">
                                                                            <Style.Triggers>
                                                                                <Trigger Property="IsMouseOver" Value="True">
                                                                                    <Setter Property="Source" Value="Resources/Picture/subsection2.png"/>
                                                                                </Trigger>
                                                                                <Trigger Property="IsMouseOver" Value="False">
                                                                                    <Setter Property="Source" Value="Resources/Picture/subsection1.png"/>
                                                                                </Trigger>
                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </Image.Style>
                                                                </Image>


                                                                <Canvas Panel.ZIndex="3"    x:Name="SubsectionMenu" Visibility="Hidden"  >
                                                                    <Rectangle  Opacity="0.86"  Fill="{DynamicResource BackgroundMenu}"  StrokeThickness="0" RadiusX="5" RadiusY="5" >
                                                                        <Rectangle.Style>
                                                                            <Style TargetType="Rectangle">
                                                                            <Style.Triggers>
                                                                                <DataTrigger  Binding="{Binding ShowImageMode, Mode=OneWay, Source={x:Static p:Settings.Default}}"  Value="海报图">
                                                                                    <Setter Property="Width" Value="{Binding ElementName=ViewImage,Path=Width,TargetNullValue=100}" />
                                                                                        <Setter Property="Height" Value="{Binding ElementName=ViewImage,Path=Height,TargetNullValue=100}" />
                                                                                    </DataTrigger>

                                                                                <DataTrigger  Binding="{Binding ShowImageMode, Mode=OneWay, Source={x:Static p:Settings.Default}}"  Value="缩略图">
                                                                                        <Setter Property="Width" Value="{Binding ElementName=ViewImage,Path=Width,TargetNullValue=100}" />
                                                                                        <Setter Property="Height" Value="{Binding ElementName=ViewImage,Path=Height,TargetNullValue=100}" />
                                                                                    </DataTrigger>

                                                                                <DataTrigger  Binding="{Binding ShowImageMode, Mode=OneWay, Source={x:Static p:Settings.Default}}"  Value="预览图">
                                                                                    <Setter Property="Width" Value="{Binding ElementName=ExtraImageCanvas,Path=Width}" />
                                                                                        <Setter Property="Height" Value="{Binding ElementName=ExtraImageCanvas,Path=Height}" />
                                                                                    </DataTrigger>
                                                                            </Style.Triggers>
                                                                            </Style>
                                                                        </Rectangle.Style>
                                                                    </Rectangle>

                                                                    <StackPanel Orientation="Vertical" >
                                                                        <StackPanel.Style>
                                                                            <Style TargetType="StackPanel">
                                                                                <Style.Triggers>
                                                                                    <DataTrigger  Binding="{Binding ShowImageMode, Mode=OneWay, Source={x:Static p:Settings.Default}}"  Value="海报图">
                                                                                        <Setter Property="Width" Value="{Binding ElementName=ViewImage,Path=Width,TargetNullValue=100}" />
                                                                                        <Setter Property="Height" Value="{Binding ElementName=ViewImage,Path=Height,TargetNullValue=100}" />
                                                                                    </DataTrigger>

                                                                                    <DataTrigger  Binding="{Binding ShowImageMode, Mode=OneWay, Source={x:Static p:Settings.Default}}"  Value="缩略图">
                                                                                        <Setter Property="Width" Value="{Binding ElementName=ViewImage,Path=Width,TargetNullValue=100}" />
                                                                                        <Setter Property="Height" Value="{Binding ElementName=ViewImage,Path=Height,TargetNullValue=100}" />
                                                                                    </DataTrigger>

                                                                                    <DataTrigger  Binding="{Binding ShowImageMode, Mode=OneWay, Source={x:Static p:Settings.Default}}"  Value="预览图">
                                                                                        <Setter Property="Width" Value="{Binding ElementName=ExtraImageCanvas,Path=Width}" />
                                                                                        <Setter Property="Height" Value="{Binding ElementName=ExtraImageCanvas,Path=Height}" />
                                                                                    </DataTrigger>
                                                                                </Style.Triggers>
                                                                            </Style>
                                                                        </StackPanel.Style>


                                                                        <TextBlock Text="分段视频" Style="{StaticResource BaseTextBlock}" Foreground="{DynamicResource ForegroundSearch}"/>
                                                                        <ItemsControl AlternationCount="99"   x:Name="SubsectionItemsControl"  ItemsSource="{Binding subsectionlist}" ScrollViewer.VerticalScrollBarVisibility="Auto" Background="Transparent"  >
                                                                            <ItemsControl.ItemsPanel>
                                                                                <ItemsPanelTemplate>
                                                                                    <WrapPanel Orientation="Horizontal" Panel.ZIndex="4"  />
                                                                                </ItemsPanelTemplate>
                                                                            </ItemsControl.ItemsPanel>

                                                                            <ItemsControl.ItemTemplate>
                                                                                <DataTemplate>
                                                                                    <WrapPanel>
                                                                                        <StackPanel Width="auto">
                                                                                            <Button  HorizontalAlignment="Center" Click="OpenSubSuctionVedio" Height="20" Width="50" Content="{Binding RelativeSource={RelativeSource Mode=TemplatedParent},Path=(ItemsControl.AlternationIndex)}" >
                                                                                                <Button.Style>
                                                                                                    <Style  TargetType="Button">
                                                                                                        <Setter Property="Cursor" Value="Hand"/>
                                                                                                        <Setter Property="Foreground" Value="{DynamicResource ForegroundSearch}"/>
                                                                                                        <Setter Property="Background" Value="#1A97ED"/>
                                                                                                        <Setter Property="Margin" Value="5"/>
                                                                                                        <Setter Property="BorderThickness" Value="0"/>
                                                                                                        <Style.Triggers>
                                                                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                                                                <Setter Property="Background" Value="#5AC6FC"/>
                                                                                                            </Trigger>
                                                                                                        </Style.Triggers>
                                                                                                    </Style>
                                                                                                </Button.Style>
                                                                                            </Button>
                                                                                            <TextBlock Text="{Binding }" Visibility="Collapsed"   />
                                                                                        </StackPanel>
                                                                                    </WrapPanel>
                                                                                </DataTemplate>
                                                                            </ItemsControl.ItemTemplate>
                                                                        </ItemsControl>
                                                                    </StackPanel>
                                                                </Canvas>

                                                            </Grid>

                                                            <!--播放按钮-->

                                                            <Canvas Margin="10 0 10 0" Opacity="0.5"  Style="{StaticResource PlayButton}" MouseLeftButtonUp="PlayVedio"  Cursor="Hand" Width="40" Height="40"  VerticalAlignment="Center" HorizontalAlignment="Center"  >
                                                                <Ellipse Fill="#DD744C"  Width="40" Height="40" Canvas.Left="3" Canvas.Top="3"  />
                                                                <Polygon Points="15,38 35,25 15,10" Stroke="{DynamicResource BackgroundMenu}" Fill="#F6F7F7"  Cursor="Hand" />
                                                            </Canvas>
                                                        </Grid>


                                                        <TextBox x:Name="idTextBox"  Text="{Binding id}" Visibility="Collapsed"/>

                                                        <TextBox   TextDecorations="{Binding Font_Title_UnderLine,Converter={StaticResource BoolToUnderLineConverter},Source={x:Static p:Settings.Default}}" FontStyle="{Binding Font_Title_Italic,Converter={StaticResource BoolToFontItalicConverter},Source={x:Static p:Settings.Default}}"  FontWeight="{Binding Font_Title_Bold,Converter={StaticResource BoolToFontBoldConverter},Source={x:Static p:Settings.Default}}" FontSize="{Binding Path=Font_Title_Size,Mode=OneWay, Source={x:Static p:Settings.Default}}" FontFamily="{Binding Path=Font_Title_Family,Mode=OneWay, Source={x:Static p:Settings.Default},Converter={StaticResource FontFamilyConverter}}"       Foreground="{DynamicResource ForegroundGlobal}"  Text="{Binding title}" Style="{StaticResource InfoTextBox}" Visibility="{Binding DisplayTitle, Converter={StaticResource BoolToVis}, Mode=TwoWay, Source={x:Static p:Settings.Default}}"/>
                                                        <TextBox     TextDecorations="{Binding Font_ID_UnderLine,Converter={StaticResource BoolToUnderLineConverter},Source={x:Static p:Settings.Default}}" FontStyle="{Binding Font_ID_Italic,Converter={StaticResource BoolToFontItalicConverter},Source={x:Static p:Settings.Default}}"  FontWeight="{Binding Font_ID_Bold,Converter={StaticResource BoolToFontBoldConverter},Source={x:Static p:Settings.Default}}" FontSize="{Binding Path=Font_ID_Size,Mode=OneWay, Source={x:Static p:Settings.Default}}" FontFamily="{Binding Path=Font_ID_Family,Mode=OneWay, Source={x:Static p:Settings.Default},TargetNullValue=宋体}"       Text="{Binding id}"    Foreground="{DynamicResource ForegroundGlobal}"  Style="{StaticResource InfoTextBox}"  Visibility="{Binding DisplayID, Converter={StaticResource BoolToVis}, Mode=TwoWay, Source={x:Static p:Settings.Default}}"/>
                                                        <TextBox    TextDecorations="{Binding Font_Date_UnderLine,Converter={StaticResource BoolToUnderLineConverter},Source={x:Static p:Settings.Default}}" FontStyle="{Binding Font_Date_Italic,Converter={StaticResource BoolToFontItalicConverter},Source={x:Static p:Settings.Default}}"  FontWeight="{Binding Font_Date_Bold,Converter={StaticResource BoolToFontBoldConverter},Source={x:Static p:Settings.Default}}" FontSize="{Binding Path=Font_Date_Size,Mode=OneWay, Source={x:Static p:Settings.Default}}" FontFamily="{Binding Path=Font_Date_Family,Mode=OneWay, Source={x:Static p:Settings.Default},TargetNullValue=宋体}"            Text="{Binding releasedate}"    Foreground="{DynamicResource ForegroundGlobal}"  Style="{StaticResource InfoTextBox}"  Visibility="{Binding DisplayDate, Converter={StaticResource BoolToVis}, Mode=TwoWay, Source={x:Static p:Settings.Default}}"/>

                                                        <TextBox Text="{Binding filepath}"  Visibility="Collapsed"/>


                                                        <!--标签戳-->
                                                        <WrapPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="12 5" Visibility="{Binding DisplayStamp,Converter={StaticResource BoolToVis},Source={x:Static p:Settings.Default}}">
                                                            <Border CornerRadius="4" Background="#7192B0" Margin="5 0" Visibility="{Binding filepath,Converter={StaticResource HDVConverter},Mode=OneWay}" >
                                                                <Label Content="高清" Foreground="{DynamicResource ForegroundSearch}"/>
                                                            </Border>
                                                            <Border CornerRadius="4" Background="#F2C17B" Margin="5 0" Visibility="{Binding filepath,Converter={StaticResource CHSConverter},Mode=OneWay}" >
                                                                <Label Content="中文" Foreground="{DynamicResource ForegroundSearch}" />
                                                            </Border>
                                                            <Border CornerRadius="4" Background="#89C989" Margin="5 0" Visibility="{Binding filepath,Converter={StaticResource OutFlowConverter},Mode=OneWay}" >
                                                                <Label Content="流出" Foreground="{DynamicResource ForegroundSearch}" />
                                                            </Border>
                                                        </WrapPanel>

                                                    </StackPanel>
                                                </Border>
                                            </WrapPanel>


                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>

                            </ScrollViewer>
                        </Grid>
                        <!--返回顶部-->
                        <Canvas Panel.ZIndex="5" MouseLeftButtonUp="GotoTop" x:Name="GoToTopCanvas" Cursor="Hand" Width="20" Height="20"  VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="0 0 50 50"  Visibility="Hidden">
                            <Ellipse Style="{StaticResource Ellipse2}"  Width="40" Height="40"  VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="0 0 5 5" />
                            <Image  Source="{Binding Themes, Mode=OneWay, ConverterParameter=up,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="22" HorizontalAlignment="Left" Panel.ZIndex="2"  Canvas.Left="8" Canvas.Top="7"    />
                        </Canvas>


                    </Grid>








                </DockPanel>





                <Grid Visibility="Hidden" x:Name="Grid_GAL" Margin="5 50 5 15" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Background="Transparent" PreviewKeyDown="ActorGrid_PreviewKeyDown"  >
                    <Grid Panel.ZIndex="5"   Background="Transparent" VerticalAlignment="Top" Height="40" Margin="5 0 5 10">
                        <Border CornerRadius="15" Background="{DynamicResource BackgroundTitle}" HorizontalAlignment="Stretch" Width="auto"/>
                        <StackPanel x:Name="ActorToolsStackPanel"  Orientation="Horizontal" Margin="150 0" Visibility="Hidden" >
                            <CheckBox Click="ActorCheckBox_Click" Foreground="{DynamicResource ForegroundGlobal}"  IsChecked="{Binding ActorEditMode, Mode=TwoWay, Source={x:Static p:Settings.Default}}"  Height="30" Content="多选模式"  HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Margin="5 0" HorizontalAlignment="Left" />

                            <Grid x:Name="DownloadActorGrid" ToolTip="仅支持 Bus 演员信息与头像"   Width="auto" HorizontalAlignment="Left"  MouseLeftButtonUp="ShowDownloadActorMenu" Cursor="Hand" Height="30" Margin="5 0">
                                <Border CornerRadius="5" Background="{DynamicResource BackgroundTab}"  />
                                <Image Source="Resources/Picture/download.png" Height="24" HorizontalAlignment="Left" Margin="3 0"></Image>
                            </Grid>

                        </StackPanel>

                        <Popup  VerticalOffset="10" HorizontalOffset="-20" x:Name="DownloadActorPopup" Placement="Bottom" PopupAnimation="Fade"  PlacementTarget="{Binding ElementName=DownloadActorGrid}" AllowsTransparency="True" StaysOpen="False" IsOpen="False">
                            <Border Background="{DynamicResource BackgroundMenu}"   Margin="2" >
                                <Border.Effect>
                                    <DropShadowEffect BlurRadius="15" Direction="-90" RenderingBias="Quality" ShadowDepth="2"/>
                                </Border.Effect>
                                <StackPanel  Panel.ZIndex="7" Background="Transparent" Orientation="Vertical" Width="100" Height="auto" Margin="5" >
                                    <Button  Style="{StaticResource SetButton}" Content="刮削本页" Click="StartDownLoadActress" />
                                    <Button  Style="{StaticResource SetButton}"  Content="停止刮削"  Click="StopDownLoadActress"    />
                                </StackPanel>
                            </Border>
                        </Popup>

                        <Grid Background="Transparent"  Width="110" HorizontalAlignment="Left" MouseUp="ShowTypeMenu" Cursor="Hand" Height="30" Margin="10 0 0 0">
                            <Border CornerRadius="5" Background="{DynamicResource BackgroundTab}" Width="110" HorizontalAlignment="Left" Height="25"/>
                            <Label x:Name="TypeLabel"  Height="25" Width="auto"  Content="{Binding VedioType}"  HorizontalAlignment="Center" HorizontalContentAlignment="Center" Foreground="{DynamicResource ForegroundSearch}" FontSize="12" FontFamily="微软雅黑"/>
                        </Grid>




                        <!--Menu-->
                        <Canvas  x:Name="TypeMenu"  Width="100" HorizontalAlignment="Left" Visibility="Hidden" Margin="15 15 0 0">
                            <Polygon Panel.ZIndex="3" Points="50,20 20,50 70,50" Stroke="{DynamicResource BackgroundMenu}" Fill="{DynamicResource BackgroundMenu}" Cursor="Hand" />
                            <Rectangle Panel.ZIndex="3" Width="150" Height="130" Fill="{DynamicResource BackgroundMenu}"  StrokeThickness="0" RadiusX="5" RadiusY="5" Canvas.Left="-25" Canvas.Top="40"/>

                            <StackPanel Panel.ZIndex="4" Background="Transparent" Orientation="Vertical" Width="140" Height="auto" Canvas.Left="-21" Canvas.Top="50">
                                <Label MouseUp="SetTypeValue" Style="{StaticResource BaseLabel}"  Content="所有" HorizontalContentAlignment="Center"/>
                                <Label MouseUp="SetTypeValue" Style="{StaticResource BaseLabel}" Content="步兵" HorizontalContentAlignment="Center"/>
                                <Label MouseUp="SetTypeValue" Style="{StaticResource BaseLabel}"  Content="骑兵" HorizontalContentAlignment="Center"/>
                                <Label MouseUp="SetTypeValue" Style="{StaticResource BaseLabel}" Content="欧美" HorizontalContentAlignment="Center"/>
                            </StackPanel>
                        </Canvas>

                    </Grid>


                    <!--类别-->
                    <Grid  x:Name="Grid_Genre" Panel.ZIndex="0"  Margin="5 50 5 5" Visibility="Hidden">
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <ItemsControl ItemsSource="{Binding GenreList}" >
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel>
                                            <TextBlock Style="{StaticResource GenTitle}" Text="主题" />
                                            <ItemsControl ItemsSource="{Binding theme}" ScrollViewer.VerticalScrollBarVisibility="Auto" Margin="5 5 5 5" Background="Transparent">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <WrapPanel Orientation="Horizontal"/>
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <WrapPanel>
                                                            <Border  Style="{StaticResource GenBorder}">
                                                                <Label Content="{Binding}" Style="{StaticResource GenLabel}" MouseUp="Genre_MouseDown"/>
                                                            </Border>
                                                        </WrapPanel>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                            <TextBlock Style="{StaticResource GenTitle}" Text="角色" />
                                            <ItemsControl ItemsSource="{Binding role}" ScrollViewer.VerticalScrollBarVisibility="Auto" Margin="5 5 5 5" Background="Transparent">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <WrapPanel Orientation="Horizontal"/>
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <WrapPanel>
                                                            <Border  Style="{StaticResource GenBorder}">
                                                                <Label Content="{Binding}" Style="{StaticResource GenLabel}" MouseUp="Genre_MouseDown"/>
                                                            </Border>
                                                        </WrapPanel>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                            <TextBlock Style="{StaticResource GenTitle}" Text="服装" />
                                            <ItemsControl ItemsSource="{Binding clothing}" ScrollViewer.VerticalScrollBarVisibility="Auto" Margin="5 5 5 5" Background="Transparent">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <WrapPanel Orientation="Horizontal"/>
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <WrapPanel>
                                                            <Border  Style="{StaticResource GenBorder}">
                                                                <Label Content="{Binding}" Style="{StaticResource GenLabel}" MouseUp="Genre_MouseDown"/>
                                                            </Border>
                                                        </WrapPanel>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                            <TextBlock Style="{StaticResource GenTitle}" Text="体型" />
                                            <ItemsControl ItemsSource="{Binding body}" ScrollViewer.VerticalScrollBarVisibility="Auto" Margin="5 5 5 5" Background="Transparent">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <WrapPanel Orientation="Horizontal"/>
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <WrapPanel>
                                                            <Border  Style="{StaticResource GenBorder}">
                                                                <Label Content="{Binding}" Style="{StaticResource GenLabel}" MouseUp="Genre_MouseDown"/>
                                                            </Border>
                                                        </WrapPanel>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                            <TextBlock Style="{StaticResource GenTitle}" Text="行为" />
                                            <ItemsControl ItemsSource="{Binding behavior}" ScrollViewer.VerticalScrollBarVisibility="Auto" Margin="5 5 5 5" Background="Transparent">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <WrapPanel Orientation="Horizontal"/>
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <WrapPanel>
                                                            <Border  Style="{StaticResource GenBorder}">
                                                                <Label Content="{Binding}" Style="{StaticResource GenLabel}" MouseUp="Genre_MouseDown"/>
                                                            </Border>
                                                        </WrapPanel>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                            <TextBlock Style="{StaticResource GenTitle}" Text="玩法" />
                                            <ItemsControl ItemsSource="{Binding playmethod}" ScrollViewer.VerticalScrollBarVisibility="Auto" Margin="5 5 5 5" Background="Transparent">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <WrapPanel Orientation="Horizontal"/>
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <WrapPanel>
                                                            <Border  Style="{StaticResource GenBorder}">
                                                                <Label Content="{Binding}" Style="{StaticResource GenLabel}" MouseUp="Genre_MouseDown"/>
                                                            </Border>
                                                        </WrapPanel>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                            <TextBlock Style="{StaticResource GenTitle}" Text="场景" />
                                            <ItemsControl ItemsSource="{Binding scene}" ScrollViewer.VerticalScrollBarVisibility="Auto" Margin="5 5 5 5" Background="Transparent">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <WrapPanel Orientation="Horizontal"/>
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <WrapPanel>
                                                            <Border  Style="{StaticResource GenBorder}">
                                                                <Label Content="{Binding}" Style="{StaticResource GenLabel}" MouseUp="Genre_MouseDown"/>
                                                            </Border>
                                                        </WrapPanel>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                            <TextBlock Style="{StaticResource GenTitle}" Text="其他" />
                                            <ItemsControl ItemsSource="{Binding other}" ScrollViewer.VerticalScrollBarVisibility="Auto" Margin="5 5 5 5" Background="Transparent">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <WrapPanel Orientation="Horizontal"/>
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <WrapPanel>
                                                            <Border  Style="{StaticResource GenBorder}">
                                                                <Label Content="{Binding}" Style="{StaticResource GenLabel}" MouseUp="Genre_MouseDown"/>
                                                            </Border>
                                                        </WrapPanel>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                        </StackPanel>


                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </Grid>

                    <!--演员-->

                    <Grid  x:Name="Grid_Actor"  Margin="5 50 5 5"   Visibility="Visible" Background="Transparent" IsVisibleChanged="Grid_Actor_IsVisibleChanged">
                        <ScrollViewer x:Name="ActorScrollViewer" VerticalScrollBarVisibility="Auto" >
                            <ScrollViewer.ContextMenu>
                                <ContextMenu>
                                    <MenuItem Header="刷新本页"  Click="RefreshCurrentActressPage" Icon="pack://application:,,,/Resources/menuitem/refresh.png"/>
                                    <MenuItem Header="选择/取消所有" Click="SelectAllActor"  Icon="pack://application:,,,/Resources/menuitem/selectall.png"/>
                                </ContextMenu>
                            </ScrollViewer.ContextMenu>
                            <ItemsControl x:Name="ActorItemsControl" ItemsSource="{Binding CurrentActorList}" ScrollViewer.VerticalScrollBarVisibility="Auto" Margin="5 5 5 5" Background="Transparent">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel Orientation="Horizontal"/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>


                                        <DataTemplate.Triggers>
                                            <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                                                <BeginStoryboard  >
                                                    <Storyboard  AutoReverse="False">
                                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="ActorWrapPanel" Storyboard.TargetProperty="(UIElement.Opacity)">
                                                            <EasingDoubleKeyFrame KeyTime="0" Value="0" />
                                                            <EasingDoubleKeyFrame KeyTime="0:0:0.25" Value="1" />
                                                        </DoubleAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </EventTrigger>
                                        </DataTemplate.Triggers>

                                        <WrapPanel x:Name="ActorWrapPanel">
                                            <Border  Style="{StaticResource ActorBorder}" MouseLeftButtonUp="ShowSameActor" MouseEnter="ActorBorderMouseEnter" MouseLeave="ActorBorderMouseLeave" CornerRadius="5">

                                                <StackPanel Orientation="Vertical">
                                                    <Image x:Name="ActorImage"  Height="100" Width="100" Style="{StaticResource ActorImage}"  />
                                                    <TextBox x:Name="ActorNameTextBox" TextAlignment="Center" Margin="10 5" Foreground="{DynamicResource ForegroundGlobal}" FontSize="18"  Style="{StaticResource ActorInfoTextBox}" >
                                                        <TextBox.Text>
                                                            <MultiBinding StringFormat="{}{0}({1})">
                                                                <Binding Path="name" />
                                                                <Binding Path="num" />
                                                                <!--<Binding trace:PresentationTraceSources.TraceLevel="High"></Binding>-->
                                                            </MultiBinding>
                                                        </TextBox.Text>
                                                    </TextBox>
                                                    <TextBlock Text="{Binding id}" Visibility="Collapsed"/>
                                                    <StackPanel.ContextMenu>
                                                        <ContextMenu>
                                                            <MenuItem Header="刮削演员" Icon="pack://application:,,,/Resources/menuitem/download.png" Click="DownLoadSelectedActor" />
                                                        </ContextMenu>
                                                    </StackPanel.ContextMenu>
                                                </StackPanel>


                                            </Border>
                                        </WrapPanel>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>


                        <!--页码-->
                        <Border Opacity="0.9" VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="20" CornerRadius="5" x:Name="ActorPageBorder" Background="{DynamicResource BackgroundTitle}" Height="40" Width="auto">

                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center"  Background="Transparent" Height="40" Width="auto" >
                                <Canvas PreviewMouseLeftButtonDown="PreviousActorPage" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="5 -10 30 0"   Cursor="Hand" Width="20" Height="20"   Visibility="Visible">
                                    <Ellipse Style="{StaticResource Ellipse2}"  Width="30" Height="30"  VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="0 0 5 5" />
                                    <Image  Source="{Binding Themes, Mode=OneWay, ConverterParameter=left,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="20" HorizontalAlignment="Left" Panel.ZIndex="2"  Canvas.Left="3" Canvas.Top="5"    />
                                </Canvas>

                                <StackPanel  Orientation="Horizontal" Height="40" Width="auto">
                                    <TextBox GotFocus="TextBox_GotFocus" PreviewKeyDown="ActorTextBox_PreviewKeyDown"  Style="{StaticResource BaseTextBox}"  Padding="10 0"   BorderThickness="0"  Text="{Binding CurrentActorPage}"  VerticalAlignment="Center" HorizontalAlignment="Stretch" Margin="10 1 10 1"/>
                                    <TextBlock Foreground="{DynamicResource ForegroundSearch}" Padding="10 0"  Text="{Binding TotalActorPage, StringFormat=/\{0\}}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="10 1 10 1"/>
                                </StackPanel>
                                <Canvas PreviewMouseLeftButtonDown="NextActorPage" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="30 -10 15 0"   Cursor="Hand" Width="20" Height="20"   Visibility="Visible">
                                    <Ellipse Style="{StaticResource Ellipse2}"  Width="30" Height="30"  VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="0 0 5 5" />
                                    <Image  Source="{Binding Themes, Mode=OneWay, ConverterParameter=right,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="20" HorizontalAlignment="Left" Panel.ZIndex="2"  Canvas.Left="6" Canvas.Top="4"    />
                                </Canvas>

                            </StackPanel>
                        </Border>



                    </Grid>

                    <!--标签-->
                    <Grid x:Name="Grid_Label"  Margin="5 50 5 5" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"   Visibility="Hidden">

                        <Grid  Margin="5">
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <ItemsControl ItemsSource="{Binding LabelList}" ScrollViewer.VerticalScrollBarVisibility="Auto" Margin="5" Background="Transparent">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <WrapPanel Orientation="Horizontal"/>
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <WrapPanel>
                                                <Border  Style="{StaticResource GenBorder}">
                                                    <Grid>
                                                        <Label Content="{Binding}" Style="{StaticResource GenLabel}" MouseUp="Label_MouseDown"/>
                                                    </Grid>
                                                </Border>

                                            </WrapPanel>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </ScrollViewer>
                        </Grid>
                    </Grid>
                </Grid>



                <ProgressBar IsVisibleChanged="ProgressBar_IsVisibleChanged" x:Name="ProgressBar" Visibility="Visible" Foreground="LightGreen"   Height="5" Margin="20 5"   VerticalAlignment="Bottom"  HorizontalAlignment="Stretch" Width="auto"  Maximum="100" Minimum="0"  />



            </Grid>

            <!--鸣谢-->

            <Grid x:Name="ThanksGrid" Background="Transparent" VerticalAlignment="Center" HorizontalAlignment="Center" Height="auto" Width="500" Visibility="Hidden" >
                <Border Background="{DynamicResource BackgroundTitle}" CornerRadius="5" Opacity="0.9"  />

                <Border Height="30" Width="30" HorizontalAlignment="Right"  VerticalAlignment="Top" PreviewMouseLeftButtonUp="HideGrid"   CornerRadius="3" Style="{StaticResource CloseBorderStyle}" >
                    <Image Source="{Binding Themes, Mode=OneWay, ConverterParameter=close,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="20" Width="20"   />
                </Border>
                <StackPanel Orientation="Horizontal">
                    <Image Margin="10 5" HorizontalAlignment="Left" Height="30" VerticalAlignment="Top" Source="/Resources/Picture/Jvedio.png"/>
                    <Image Margin="5 12" HorizontalAlignment="Left" Height="20"  VerticalAlignment="Top"  Source="Resources/Picture/Title.png"/>
                </StackPanel>

                <StackPanel Orientation="Vertical">



                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">


                        <TextBlock x:Name="ThankTextBlock" FontSize="20"  Text="鸣谢" TextAlignment="Center" Foreground="{DynamicResource ForegroundSearch}" Margin="10"/>

                    </StackPanel>

                    <StackPanel Orientation="Vertical" HorizontalAlignment="Center">

                        <TextBlock  Text="UI 设计：青萍之末" Style="{StaticResource BaseTextBlock}"></TextBlock>
                        
                        
                        
                        <TextBlock  Text="调试：sheldon, SHAWN, dddsG, EEE, jion 等网友" Style="{StaticResource BaseTextBlock}"></TextBlock>
                        <TextBlock  Text="感谢 小猪培根 等人的赞助支持！" Style="{StaticResource BaseTextBlock}"></TextBlock>
                        <TextBlock  Text="感谢 众多网友对 Jvedio 的赞助与支持！" Style="{StaticResource BaseTextBlock}"></TextBlock>
                        <TextBlock  Text="预祝 Jvedio 发展越来越好" Style="{StaticResource BaseTextBlock}"></TextBlock>
                    </StackPanel>
                </StackPanel>
            </Grid>


            <!--关于-->

            <Grid x:Name="AboutGrid" Background="Transparent" VerticalAlignment="Center" HorizontalAlignment="Center" Height="auto" Width="500" Visibility="Hidden" >
                <Border Background="{DynamicResource BackgroundTitle}" CornerRadius="5" Opacity="0.9" />

                <Border Height="30" Width="30" HorizontalAlignment="Right"  VerticalAlignment="Top" PreviewMouseLeftButtonUp="HideGrid"   CornerRadius="3" Style="{StaticResource CloseBorderStyle}" >
                    <Image Source="{Binding Themes, Mode=OneWay, ConverterParameter=close,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="20" Width="20"   />
                </Border>

                <StackPanel Orientation="Vertical" Margin="0 50 0 20">
                    <Image HorizontalAlignment="Center" Height="80" VerticalAlignment="Center" Source="/Resources/Picture/Jvedio.png"/>
                    <Image Margin="0 10 0 10" HorizontalAlignment="Center" Height="40"  VerticalAlignment="Center"  Source="Resources/Picture/Title.png"/>
                    <TextBlock x:Name="VersionTextBlock" FontSize="20"  Text="版本：" TextAlignment="Center" Foreground="{DynamicResource ForegroundSearch}" Margin="10"/>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">

                        <TextBlock FontSize="20"    TextAlignment="Center" Foreground="{DynamicResource ForegroundSearch}" Margin="10"><Hyperlink NavigateUri="https://gitee.com/hitchao/Jvedio" Click="OpenUrl" ><Run Text="Gitee"/></Hyperlink></TextBlock>
                        <TextBlock FontSize="20"    TextAlignment="Center" Foreground="{DynamicResource ForegroundSearch}" Margin="10"><Hyperlink NavigateUri="https://github.com/hitchao/Jvedio" Click="OpenUrl" ><Run Text="GitHub"/></Hyperlink></TextBlock>
                        <TextBlock FontSize="20"    TextAlignment="Center" Foreground="{DynamicResource ForegroundSearch}" Margin="10"><Hyperlink NavigateUri="https://hitchao.gitee.io/jvediowebpage/" Click="OpenUrl"  ><Run Text="官方网址"/></Hyperlink></TextBlock>
                    </StackPanel>
                </StackPanel>

            </Grid>

            <!--标签-->

            <!--<Grid x:Name="LabelEditGrid" Background="Transparent" VerticalAlignment="Center" HorizontalAlignment="Center" Height="360" Width="500" Visibility="Visible" >
                <TextBlock Text="标签管理" Style="{StaticResource BaseTextBlock}" Margin="5 20" VerticalAlignment="Top" HorizontalAlignment="Center" Foreground="{DynamicResource ForegroundSearch}"/>


                <Border Background="{DynamicResource BackgroundTitle}" CornerRadius="5" Opacity="0.9" />
                <Border Height="30" Width="30" HorizontalAlignment="Right"  VerticalAlignment="Top" PreviewMouseLeftButtonUp="HideGrid"   CornerRadius="3" Style="{StaticResource CloseBorderStyle}" >
                    <Image Source="{Binding Themes, Mode=OneWay, ConverterParameter=close,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="20" Width="20"   />
                </Border>


                <ScrollViewer  Margin="10 60">

                    <ItemsControl ItemsSource="{Binding SelectedMovie}" ScrollViewer.VerticalScrollBarVisibility="Auto" Margin="5 5 5 5" Background="Transparent">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Orientation="Vertical"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <StackPanel >
                                    <Border  Cursor="Arrow"  Style="{StaticResource ActorBorder}"  CornerRadius="5">
                                        <StackPanel Orientation="Vertical">
                                            <TextBlock Text="{Binding id}" Style="{StaticResource BaseTextBlock}" HorizontalAlignment="Left" Margin="10 2"/>
                                            <ListBox    ItemsSource="{Binding label,Converter={StaticResource LabelToListConverter},Mode=TwoWay,TargetNullValue={x:Null}}" x:Name="PathListBox"  Height="auto"  >
                                                <ListBox.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <WrapPanel Orientation="Horizontal" Width="{Binding Path=Width,RelativeSource={RelativeSource AncestorType={x:Type ListBox},Mode=FindAncestor}}"/>
                                                    </ItemsPanelTemplate>
                                                </ListBox.ItemsPanel>
                                                <ListBox.ItemTemplate>
                                                    <DataTemplate>
                                                        <StackPanel Orientation="Horizontal" >
                                                            <TextBlock Text="{Binding}" Foreground="{DynamicResource ForegroundSearch}" FontSize="15" />
                                                            <Border MouseLeftButtonUp="DelLabel" Visibility="{Binding Converter={StaticResource PlusToVisibilityConverter},Mode=OneWay}"  Height="15" Width="15" Margin="5 0" CornerRadius="5" Style="{StaticResource CloseBorderStyle}" >
                                                                <Image Source="{Binding Themes, Mode=OneWay, ConverterParameter=close,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="10" Width="10"   />
                                                            </Border>
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </ListBox.ItemTemplate>
                                            </ListBox>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>


                </ScrollViewer>

                <StackPanel  Orientation="Horizontal" VerticalAlignment="Bottom" Height="50" Margin="10 0">
                    <TextBox Background="{DynamicResource BackgroundMain}"   Text="" Style="{StaticResource BaseTextBox}" Margin="5" Height="30" Width="200" ToolTip="请输入标签"/>

                    <Button Style="{StaticResource ButtonStyleFill}" Content="批量添加" Height="25" Width="80"/>
                    <Button Style="{StaticResource ButtonStyleFill}" Content="批量删除" Height="25" Width="80"/>
                    <Button Style="{StaticResource ButtonStyleFill}" Content="清空" Height="25" Width="80"/>
                </StackPanel>



            </Grid>-->

            <!--公告-->

            <Grid x:Name="NoticeGrid" Background="Transparent" VerticalAlignment="Center" HorizontalAlignment="Center" Height="360" Width="500" Visibility="Hidden" >
                <Image Source="Resources/Picture/hankuke.jpg" Stretch="Fill"/>
                <Border Background="{DynamicResource BackgroundTitle}" CornerRadius="5" Opacity="0.9"/>
                <Border Height="30" Width="30" HorizontalAlignment="Right"  VerticalAlignment="Top" PreviewMouseLeftButtonUp="HideGrid"   CornerRadius="3" Style="{StaticResource CloseBorderStyle}" >
                    <Image Source="{Binding Themes, Mode=OneWay, ConverterParameter=close,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="20" Width="20"   />
                </Border>
                <StackPanel Orientation="Vertical" Margin="0 50">
                    <TextBlock FontSize="20"  Text="公告" TextAlignment="Center" Foreground="{DynamicResource ForegroundSearch}" Margin="10" FontWeight="Bold"/>
                    <TextBlock x:Name="NoticeTextBlock" TextWrapping="Wrap" FontSize="20"    TextAlignment="Left" Foreground="{DynamicResource ForegroundSearch}" Margin="40 5" Text="新版本已上线"></TextBlock>
                </StackPanel>

            </Grid>

            <!--升级-->

            <Grid Visibility="Hidden" x:Name="UpdateGrid" Background="Transparent" VerticalAlignment="Center" HorizontalAlignment="Center" Height="360" Width="500"  >
                <Border Background="{DynamicResource BackgroundMain}" CornerRadius="5" Opacity="1" Margin="2">
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="15" Direction="-90" RenderingBias="Quality" ShadowDepth="2"/>
                    </Border.Effect>
                </Border>
                <Border Height="30" Width="30" HorizontalAlignment="Right"  VerticalAlignment="Top" PreviewMouseLeftButtonUp="HideGrid"   CornerRadius="3" Style="{StaticResource CloseBorderStyle}" >
                    <Image Source="{Binding Themes, Mode=OneWay, ConverterParameter=close,Converter={StaticResource StringToUriStringConverterMain}, Source={x:Static p:Settings.Default}}" Height="20" Width="20"   />
                </Border>
                <Grid  Margin="0 30">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="700*"/>
                        <ColumnDefinition Width="300*"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" Orientation="Vertical">

                        <StackPanel Orientation="Horizontal" Margin="20 5">
                            <Image Source="/Resources/Picture/升级.png"/>
                            <TextBlock FontSize="20"  Text="检查更新" TextAlignment="Center" Foreground="{DynamicResource ForegroundSearch}" Margin="10" FontWeight="Bold"/>

                        </StackPanel>

                        <StackPanel Orientation="Vertical" HorizontalAlignment="Left" Margin="50 0">
                            <TextBlock x:Name="LocalVersionTextBlock" HorizontalAlignment="Left"  FontSize="14"  Text="当前版本：" TextAlignment="Center" Foreground="{DynamicResource ForegroundGlobal}" Margin="10" />
                            <TextBlock  x:Name="RemoteVersionTextBlock"   FontSize="16"  Text="最新版本：" TextAlignment="Center" Foreground="{DynamicResource ForegroundSearch}" Margin="10" />

                        </StackPanel>

                        <StackPanel Orientation="Vertical" HorizontalAlignment="Left" Margin="50 20" Height="150">
                            <TextBlock  HorizontalAlignment="Left"  FontSize="18"  Text="更新日志" TextAlignment="Center" Foreground="{DynamicResource ForegroundSearch}" Margin="10" FontWeight="Bold"/>
                            <TextBox x:Name="UpdateContentTextBox" TextAlignment="Left" IsReadOnly="True" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" Background="Transparent" BorderThickness="0" Height="100"    FontSize="18" Width="auto"  Text="" Foreground="{DynamicResource ForegroundGlobal}" Margin="10"   />

                        </StackPanel>




                    </StackPanel>



                    <StackPanel Grid.Column="1" Orientation="Vertical" HorizontalAlignment="Center" Margin="0 20">
                        <Button  Margin="0 10"  Style="{StaticResource ButtonStyleFill}" Content="开始更新" Width="120" Height="30" FontSize="15" Click="OpenUpdate" />
                        <Button Margin="0 10" Background="{DynamicResource BackgroundSide}" Style="{StaticResource ButtonStyleFill}" Content="官网下载" Width="120" Height="30" FontSize="15" Click="GotoDownloadUrl" />
                    </StackPanel>
                </Grid>

            </Grid>

        </Grid>
    </Grid>
</Window>
